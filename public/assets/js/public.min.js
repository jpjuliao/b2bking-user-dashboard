!function(t){"use strict";t(document).ready(function(){1===jQuery(".wp-block-woocommerce-cart").length&&(jQuery(".b2bking_add_cart_to_purchase_list_button").detach().insertAfter(".wp-block-woocommerce-cart"),jQuery(".b2bking_add_cart_to_purchase_list_button").css("float","right"),jQuery(".b2bking_add_cart_to_purchase_list_button").css("margin-bottom","5px")),t("body.theme-amedeo").on("click",".eltdf-quantity-minus",function(e){let n=t(this).parent().find("input"),i=t(n).data("min"),_=t(n).data("step");t(n).val()-_<i&&(e.preventDefault(),e.stopPropagation())}),t("body.theme-riode").on("click",".quantity-plus",function(e){let n=t(this).parent().find("input"),i=t(n).val();t(n).val(parseInt(i)-1),n[0].stepUp(1),t(n).trigger("input")}),t("body.theme-riode").on("click",".quantity-minus",function(e){let n=t(this).parent().find("input"),i=t(n).val();t(n).val(parseInt(i)+1),n[0].stepDown(1),t(n).trigger("input")}),jQuery("body.theme-porto").on("click",".quantity button.plus:not(.woocommerce-variations-table .quantity button.plus)",function(t){t.preventDefault(),t.stopPropagation();let e=jQuery(this).parent().find("input");e[0].stepUp(1),jQuery(e).trigger("input")}),jQuery("body.theme-porto").on("click",".quantity button.minus:not(.woocommerce-variations-table .quantity button.minus)",function(t){t.preventDefault(),t.stopPropagation();let e=jQuery(this).parent().find("input");e[0].stepDown(1),jQuery(e).trigger("input")}),jQuery("body.theme-riode").on("click",".add_to_cart_button",function(t){var e=jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).attr("data-quantity",e)}),jQuery("body.theme-riode").on("click",".d-icon-plus",function(t){var e=jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).parent().parent().find(".add_to_cart_button").attr("data-quantity",e)}),jQuery("body.theme-riode").on("click",".d-icon-minus",function(t){var e=jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).parent().parent().find(".add_to_cart_button").attr("data-quantity",e)}),jQuery("body.theme-Divi").on("click",".quantity .plus, .quantity .minus",function(t){jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).parent().find('input[name="quantity"]').trigger("input")}),jQuery("body.theme-greenshift").on("click",".quantity .sub, .quantity .add",function(t){jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).parent().find('input[name="quantity"]').trigger("input")});var e=t("#b2bking_indigo_order_form").val();t("#b2bking_indigo_order_form.b2bking_cream_order_form").val();function n(e){for(var n=t(e).attr("class").split(/\s+/),i=null,_=0;_<n.length;_++){if(n[_].match(/^sum_up_variations_(\d+)$/)){i=n[_];break}}return!!i}function i(){var t=document.querySelector(".b2bking_bulkorder_form_container_top").getBoundingClientRect().width;t<1050?jQuery(".b2bking_bulkorder_form_container").addClass("b2bking_form_size_1050"):jQuery(".b2bking_bulkorder_form_container").removeClass("b2bking_form_size_1050"),t<900?jQuery(".b2bking_bulkorder_form_container").addClass("b2bking_form_size_900"):jQuery(".b2bking_bulkorder_form_container").removeClass("b2bking_form_size_900"),t<750?jQuery(".b2bking_bulkorder_form_container").addClass("b2bking_form_size_750"):jQuery(".b2bking_bulkorder_form_container").removeClass("b2bking_form_size_750"),t<665?jQuery(".b2bking_bulkorder_form_container").addClass("b2bking_form_size_665"):jQuery(".b2bking_bulkorder_form_container").removeClass("b2bking_form_size_665"),t<500?jQuery(".b2bking_bulkorder_form_container").addClass("b2bking_form_size_500"):jQuery(".b2bking_bulkorder_form_container").removeClass("b2bking_form_size_500")}function _(){jQuery("#b2bking_request_custom_quote_button").attr("disabled",!0),jQuery("#b2bking_request_custom_quote_button").html(b2bking_display_settings.sending_please_wait)}function r(){if(1===parseInt(b2bking_display_settings.enable_registration_fields_checkout)){t(".b2bking_custom_registration_container").css("display","none"),t(".b2bking_custom_field_req_required").removeAttr("required"),t(".b2bking_custom_field_req_required select").removeAttr("required"),t(".b2bking_custom_field_req_required #billing_state").removeAttr("required"),t(".b2bking_custom_registration_allroles").css("display","block"),t(".b2bking_custom_registration_allroles .b2bking_custom_field_req_required").prop("required","true"),t(".b2bking_custom_registration_allroles .b2bking_custom_field_req_required select").prop("required","true"),setTimeout(function(){t(".b2bking_custom_registration_allroles .b2bking_custom_field_req_required #billing_state").prop("required","true")},125);let e=t("#b2bking_registration_roles_dropdown").val();if(t(".b2bking_custom_registration_"+e).css("display","block"),t(".b2bking_custom_registration_"+e+" .b2bking_custom_field_req_required").prop("required","true"),t(".b2bking_custom_registration_"+e+" .b2bking_custom_field_req_required select").prop("required","true"),setTimeout(function(){t(".b2bking_custom_registration_"+e+" .b2bking_custom_field_req_required #billing_state").prop("required","true")},225),1!==parseInt(b2bking_display_settings.number_of_countries)){let e=t("#b2bking_vat_number_registration_field_countries").val(),n=t(".b2bking_country_field_selector select").val();void 0===n&&(n=t("select#billing_country").val()),void 0!==e&&void 0!==n&&(e.includes(n)&&0!==n.trim().length||(t(".b2bking_vat_number_registration_field_container").css("display","none"),t("#b2bking_vat_number_registration_field").removeAttr("required")))}if(1===parseInt(b2bking_display_settings.myaccountloggedin)){let e=t("#b2bking_custom_billing_vat_countries_field input").prop("placeholder"),n=t("#billing_country").val();void 0!==e&&(e.includes(n)&&0!==n.trim().length?(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_visible"),t(".b2bking_vat_field_required_1 .optional").after('<abbr class="required" title="required">*</abbr>'),t(".b2bking_vat_field_required_1 .optional").remove(),t(".b2bking_vat_field_required_1 input").prop("required","true")):(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_hidden"),t(".b2bking_vat_field_required_1 input").removeAttr("required")))}}}function o(t,e,n){var i;if(n){var _=new Date;_.setTime(_.getTime()+24*n*60*60*parseFloat(b2bking_display_settings.cookie_expiration_days)),i="; expires="+_.toGMTString()}else i="";document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+i+"; path=/"}function a(t){o(t,"",-1)}function s(){t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy').prop("checked")?t(".b2bking_checkbox_permission_approval").css("display","flex"):t(".b2bking_checkbox_permission_approval").css("display","none")}1===parseInt(jQuery(".b2bking_bulkorder_form_container_cream").length)&&(i(),t(window).on("resize",i)),t(".b2bking_country_field_selector select").on("select2:open",function(e){const n="scroll.select2";t(e.target).parents().off(n),t(window).off(n)}),t("#b2bking_conversation_messages_container").length&&t("#b2bking_conversation_messages_container").scrollTop(t("#b2bking_conversation_messages_container")[0].scrollHeight),t("body").on("click","#b2bking_conversation_message_submit",function(){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_myaccount_conversation_endpoint_button_icon"),t(".b2bking_myaccount_conversation_endpoint_button_icon").remove();var e={action:"b2bkingconversationmessage",security:b2bking_display_settings.security,message:t("#b2bking_conversation_user_new_message").val(),conversationid:t("#b2bking_conversation_id").val()};t.post(b2bking_display_settings.ajaxurl,e,function(t){window.location.reload()})}),t("body").on("click","#b2bking_myaccount_make_inquiry_button",function(){t("#b2bking_myaccount_make_inquiry_button").css("display","none"),t(".b2bking_myaccount_individual_conversation_container").css("display","none"),t(".b2bking_myaccount_conversations_pagination_container").css("display","none"),t(".b2bking_myaccount_new_conversation_container").css("display","block")}),t("body").on("click",".b2bking_myaccount_new_conversation_close",function(){t(".b2bking_myaccount_new_conversation_container").css("display","none"),t("#b2bking_myaccount_make_inquiry_button").css("display","inline-flex"),t(".b2bking_myaccount_individual_conversation_container").css("display","block"),t(".b2bking_myaccount_conversations_pagination_container").css("display","flex")}),t("body").on("click","#b2bking_myaccount_send_inquiry_button",function(){if(t.trim(t("#b2bking_myaccount_textarea_conversation_start").val())&&t.trim(t("#b2bking_myaccount_title_conversation_start").val())){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_myaccount_start_conversation_button_icon"),t(".b2bking_myaccount_start_conversation_button_icon").remove();var e={action:"b2bkingsendinquiry",security:b2bking_display_settings.security,message:t("#b2bking_myaccount_textarea_conversation_start").val(),title:t("#b2bking_myaccount_title_conversation_start").val(),type:t("#b2bking_myaccount_conversation_type").children("option:selected").val()};"undefined"!=typeof b2bkingdokan_display_settings&&(e.vendor=t("#b2bking_myaccount_conversation_vendor").val()),"undefined"!=typeof b2bkingwcfm_display_settings&&(e.vendor=t("#b2bking_myaccount_conversation_vendor").val()),"undefined"!=typeof marketking_display_settings&&(e.vendor=t("#b2bking_myaccount_conversation_vendor").val()),t.post(b2bking_display_settings.ajaxurl,e,function(t){window.location=t})}else;}),t("body").on("click","#b2bking_request_custom_quote_button",function(){if("undefined"!=typeof b2bkingdokan_display_settings){var e=[];t(".variation dd.variation-Vendor, .variation-Vendor .item-variation-value p").each(function(){let n=t(this).text().trim();0!==n.length&&(e.includes(n)||e.push(n))});var n=e.length;if(parseInt(n)>1)return void alert(b2bkingdokan_display_settings.request_many_vendors)}if("undefined"!=typeof b2bkingwcfm_display_settings){e=[];t(".variation dd.variation-Store, .wc-block-components-product-details__vendor .wc-block-components-product-details__value").each(function(){let n=t(this).text().trim();0!==n.length&&(e.includes(n)||e.push(n))}),0==e.length&&t(".wcfm_dashboard_item_title").each(function(){let n=t(this).text().trim();0!==n.length&&(e.includes(n)||e.push(n))});n=e.length;if(parseInt(n)>1)return void alert(b2bkingwcfm_display_settings.request_many_vendors)}if("undefined"!=typeof marketking_display_settings){n=t("#marketking_number_vendors_cart").val();if(parseInt(n)>1)return void alert(marketking_display_settings.request_many_vendors)}t("#b2bking_request_custom_quote_textarea, #b2bking_request_custom_quote_textarea_abovetext, .b2bking_custom_quote_field_container, .b2bking_request_custom_quote_text_label, #b2bking_request_custom_quote_name, #b2bking_request_custom_quote_email, .b2bking_custom_quote_field, .b2bking_before_quote_request_form").css("display","block"),t("#b2bking_request_custom_quote_button").text(b2bking_display_settings.send_quote_request),t("#b2bking_request_custom_quote_button").addClass("b2bking_send_custom_quote_button"),t("#b2bking_request_custom_quote_button").removeClass("b2bking_button_quote_shortcode")}),t("body").on("click",".b2bking_send_custom_quote_button",function(){var e="standard";t(this).hasClass("b2bking_shortcode_send")&&(e="shortcode"),t(this).hasClass("b2bking_button_quote_productpage")&&(e="productpage");let n="no";if(""===t("#b2bking_request_custom_quote_name").val()&&(t("#b2bking_request_custom_quote_name").prop("required",!0),t("#b2bking_request_custom_quote_name")[0].reportValidity(),setTimeout(function(){t("#b2bking_request_custom_quote_name").prop("required",!1)},800),n="yes"),""===t("#b2bking_request_custom_quote_email").val()&&(t("#b2bking_request_custom_quote_email").prop("required",!0),t("#b2bking_request_custom_quote_email")[0].reportValidity(),setTimeout(function(){t("#b2bking_request_custom_quote_email").prop("required",!1)},800),n="yes"),jQuery("#b2bking_quote_required_ids").val().split(",").forEach(function(e){""===t("#b2bking_field_"+e).val()&&(t("#b2bking_field_"+e).prop("required",!0),t("#b2bking_field_"+e)[0].reportValidity(),setTimeout(function(){t("#b2bking_field_"+e).prop("required",!1)},800),n="yes")}),"no"===n)if(d=t("#b2bking_request_custom_quote_email").val(),void 0===t("#b2bking_request_custom_quote_email").val()||/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(d)){var i=jQuery("#b2bking_quote_text_ids").val(),r=jQuery("#b2bking_quote_checkbox_ids").val(),o=jQuery("#b2bking_quote_file_ids").val();let n=i.split(","),d=r.split(","),u=o.split(",");var a={action:"b2bkingrequestquotecart",security:b2bking_display_settings.security,message:jQuery("#b2bking_request_custom_quote_textarea").val(),name:jQuery("#b2bking_request_custom_quote_name").val(),email:jQuery("#b2bking_request_custom_quote_email").val(),title:b2bking_display_settings.custom_quote_request,location:e,type:"quote"};if("productpage"===e&&(a.product=t(this).val()),a.quotetextids=i,a.quotecheckboxids=r,a.quotefileids=o,n.forEach(function(t){a["b2bking_field_"+t]=jQuery("#b2bking_field_"+t).val()}),d.forEach(function(t){let e="b2bking_field_"+t,n="";jQuery("#b2bking_field_"+t+":checked").each(function(){n+=jQuery(this).parent().find("span").text()+", "}),n=n.slice(0,-2),a[e]=n}),""!==o){var s=parseInt(u.length),b=1;b<=s&&u.forEach(function(e,n,i){let r="b2bking_field_"+e;var o=new FormData,c=jQuery("#b2bking_field_"+e)[0].files[0];o.append("file",c),o.append("action","b2bkingquoteupload"),o.append("security",b2bking_display_settings.security),_(),jQuery.ajax({type:"POST",url:b2bking_display_settings.ajaxurl,data:o,contentType:!1,processData:!1,success:function(e){if(a[r]=e,b===s){if("undefined"!=typeof marketking_display_settings&&(a.vendor=t("#marketking_cart_vendor").val()),"undefined"!=typeof b2bkingdokan_display_settings){var n=[];t(".variation dd.variation-Vendor, .variation-Vendor .item-variation-value p").each(function(){let e=t(this).text();n.includes(e)||n.push(e)}),a.vendor=n[0]}if("undefined"!=typeof b2bkingwcfm_display_settings){n=[];t(".variation dd.variation-Store, .wc-block-components-product-details__vendor .wc-block-components-product-details__value").each(function(){let e=t(this).text();n.includes(e)||n.push(e)}),a.vendor=n[0]}if(void 0===a.vendor){var i=[];t(".wcfm_dashboard_item_title").each(function(){let e=t(this).text();i.includes(e)||i.push(e)}),jQuery.isEmptyObject(i)||(a.vendor=i[0])}t.post(b2bking_display_settings.ajaxurl,a,function(e){let n=e;t("#b2bking_request_custom_quote_name").length?(1===parseInt(b2bking_display_settings.quote_request_success_message)&&alert(b2bking_display_settings.quote_request_success),t("#b2bking_request_custom_quote_button").css("display","none"),window.location.reload()):window.location=n})}b++}})})}else{if("undefined"!=typeof b2bkingwcfm_display_settings){var c=[];t(".variation dd.variation-Store, .wc-block-components-product-details__vendor .wc-block-components-product-details__value").each(function(){let e=t(this).text();c.includes(e)||c.push(e)}),a.vendor=c[0]}var l=[];if(t(".wcfm_dashboard_item_title").each(function(){let e=t(this).text();l.includes(e)||l.push(e)}),jQuery.isEmptyObject(l)||(a.vendor=l[0]),"undefined"!=typeof marketking_display_settings&&(a.vendor=t("#marketking_cart_vendor").val()),"undefined"!=typeof b2bkingdokan_display_settings){c=[];t(".variation dd.variation-Vendor, .variation-Vendor .item-variation-value p").each(function(){let e=t(this).text();c.includes(e)||c.push(e)}),a.vendor=c[0]}_(),t.post(b2bking_display_settings.ajaxurl,a,function(e){let n=e;t("#b2bking_request_custom_quote_name").length||1===parseInt(b2bking_display_settings.quote_without_message)?(1===parseInt(b2bking_display_settings.quote_request_success_message)&&alert(b2bking_display_settings.quote_request_success),t("#b2bking_request_custom_quote_button").css("display","none"),""===b2bking_display_settings.quote_request_url_redirect?window.location.reload():window.location=b2bking_display_settings.quote_request_url_redirect):""===b2bking_display_settings.quote_request_url_redirect?window.location=n:window.location=b2bking_display_settings.quote_request_url_redirect})}}else t("#b2bking_request_custom_quote_email")[0].reportValidity();var d}),t("body").on("click",".b2bking_offer_add",function(){if(1!==b2bking_display_settings.disableofferadd){let _=t(this).val();var e=!1;if(t(this).closest(".b2bking_myaccount_individual_offer_container").find(".b2bking_offer_select").each(function(){var n=t(this).val();n&&""!==n||(e=!0,this.reportValidity())}),e)return!1;var n={};t(this).closest(".b2bking_myaccount_individual_offer_container").find(".b2bking_offer_select").each(function(){var e=t(this).attr("id"),i=t(this).val();if(e&&i&&""!==i){var _=e.split("_"),r=_[_.length-1],o=_.slice(0,-1).join("_");n[r]||(n[r]={}),n[r][o]=i}}),t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(t(this).find(".b2bking_myaccount_individual_offer_bottom_line_button_icon")),t(this).find(".b2bking_myaccount_individual_offer_bottom_line_button_icon").remove();var i={action:"b2bkingaddoffer",security:b2bking_display_settings.security,offer:_};Object.keys(n).length>0&&(i.product_attributes=n),t.post(b2bking_display_settings.ajaxurl,i,function(t){window.location=b2bking_display_settings.carturl})}}),t("body").on("click",".b2bking_offer_download",function(){var e=t(this),n=Date.now();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(t(this).find(".b2bking_myaccount_individual_offer_bottom_line_button_icon")),t(this).find(".b2bking_myaccount_individual_offer_bottom_line_button_icon").css("display","none");var i=b2bking_display_settings.offers_logo,_=t(this).parent().parent().parent().find("#b2bking_offer_id").val();let r=jQuery("#b2bking_img_logo").attr("data-src");void 0!==r&&""!==r&&jQuery("#b2bking_img_logo").attr("src",r),jQuery(".b2bking_hidden_img").each(function(t){let e=jQuery(this).attr("data-src");void 0!==e&&""!==e&&jQuery(this).attr("src",e)});var o=document.getElementById("b2bking_img_logo"),a=document.createElement("canvas");a.width=o.width,a.height=o.height,a.getContext("2d").drawImage(o,0,0);var s=a.toDataURL("image/png"),b=[],c=0;if(1===parseInt(b2bking_display_settings.offers_images_setting)){t(this).parent().parent().parent().find(".b2bking_offers_thumbnails_str").val().split("|").forEach(function(t){if("no"!==t){var e="b2bking_img_logo"+c+_,n=document.getElementById(e),i=document.createElement("canvas");i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(n,0,0);let t=i.toDataURL("image/png");c++,b.push(t)}else b.push("no")})}c=0;var l=t(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_custom_text").text();l=l.replace("\t","").trim();var d=t(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_custom_text_vendor").text();d=d.replace("\t","").trim();var u=b2bking_display_settings.offer_custom_text;0===l.length&&0===d.length&&(u="");var g=[];g.push([{text:b2bking_display_settings.item_name,style:"tableHeader",margin:[7,7,7,7]},{text:b2bking_display_settings.item_quantity,style:"tableHeader",margin:[7,7,7,7]},{text:b2bking_display_settings.unit_price,style:"tableHeader",margin:[7,7,7,7]},{text:b2bking_display_settings.item_subtotal,style:"tableHeader",margin:[7,7,7,7]}]),jQuery(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_element_line").each(function(t){let e=[];1===parseInt(b2bking_display_settings.offers_images_setting)?("no"!==b[c]?e.push([{text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item_name").first().text(),margin:[7,7,7,7]},{image:b[c],width:40,margin:[15,5,5,5]}]):e.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item_name").first().text(),margin:[7,7,7,7]}),c++):e.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item_name").first().text(),margin:[7,7,7,7]}),e.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item:nth-child(2)").text(),margin:[7,7,7,7]}),e.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item:nth-child(3)").text(),margin:[7,7,7,7]}),e.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item:nth-child(4)").text(),margin:[7,7,7,7]}),g.push(e)}),g.push(["","",{text:b2bking_display_settings.offer_total+": ",margin:[7,7,7,7],bold:!0},{text:jQuery(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_bottom_line_total strong").text(),margin:[7,7,7,7],bold:!0}]);let p={image:s,width:parseInt(b2bking_display_settings.offerlogowidth),margin:[0,parseInt(b2bking_display_settings.offerlogotopmargin),0,30]};var k=[{text:b2bking_display_settings.offer_details,fontSize:14,bold:!0,margin:[0,20,0,20]},{style:"tableExample",table:{headerRows:1,widths:["*","*","*","*"],body:g},layout:"lightHorizontalLines"},{text:b2bking_display_settings.offer_go_to,link:b2bking_display_settings.offers_endpoint_link,decoration:"underline",fontSize:13,bold:!0,margin:[0,20,40,8],alignment:"right"},{text:u,fontSize:14,bold:!0,margin:[0,50,0,8]},{text:d,fontSize:12,bold:!1,margin:[0,8,0,8]},{text:l,fontSize:12,bold:!1,margin:[0,8,0,8]}],m=b2bking_display_settings.mention_offer_requester,f=b2bking_display_settings.custom_content_after_logo_left_1,y=b2bking_display_settings.custom_content_after_logo_left_2,v=b2bking_display_settings.custom_content_after_logo_center_1,h=b2bking_display_settings.custom_content_after_logo_center_2;if(0!==f.length){let t={text:f,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"left"};k.unshift(t)}if(0!==m.length){let t={text:m+jQuery(this).data("customer"),fontSize:14,bold:!0,margin:[0,12,0,12],alignment:"left"};k.unshift(t)}if(0!==y.length){let t={text:y,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"left"};k.unshift(t)}if(0!==v.length){let t={text:v,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"center"};k.unshift(t)}if(0!==h.length){let t={text:h,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"center"};k.unshift(t)}0!==i.length&&k.unshift(p);var w=b2bking_display_settings.custom_content_center_1,x=b2bking_display_settings.custom_content_center_2,q=b2bking_display_settings.custom_content_left_1,I=b2bking_display_settings.custom_content_left_2;if(void 0!==b2bking_display_settings.custom_content_left_1[_]&&(q=b2bking_display_settings.custom_content_left_1[_]),0!==w.length){let t={text:w,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"center"};k.unshift(t)}if(0!==x.length){let t={text:x,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"center"};k.unshift(t)}if(0!==q.length){let t={text:q,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"left"};k.unshift(t)}if(0!==I.length){let t={text:I,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"left"};k.unshift(t)}1===parseInt(b2bking_display_settings.offers_rtl)&&(k=function t(e){if(Array.isArray(e))return e.map(e=>t(e));if("object"==typeof e&&null!==e){let n={};for(let i in e)n[i]=t(e[i]);return n}return"string"==typeof e&&/[\u0600-\u06FF]/.test(e)?e.split("").reverse().join(""):e}(k));var j={content:k};"thai"===b2bking_display_settings.pdf_download_lang&&(pdfMake.fonts={THSarabunNew:{normal:"THSarabunNew.ttf",bold:"THSarabunNew-Bold.ttf",italics:"THSarabunNew-Italic.ttf",bolditalics:"THSarabunNew-BoldItalic.ttf"}},j={content:k,defaultStyle:{font:"THSarabunNew"}}),"japanese"===b2bking_display_settings.pdf_download_lang&&(pdfMake.fonts={Noto:{normal:"Noto.ttf",bold:"Noto.ttf",italics:"Noto.ttf",bolditalics:"Noto.ttf"}},j={content:k,defaultStyle:{font:"Noto"}}),"standard"!==b2bking_display_settings.pdf_download_font&&(pdfMake.fonts={Customfont:{normal:b2bking_display_settings.pdf_download_font,bold:b2bking_display_settings.pdf_download_font,italics:b2bking_display_settings.pdf_download_font,bolditalics:b2bking_display_settings.pdf_download_font}},j={content:k,defaultStyle:{font:"Customfont"}}),pdfMake.createPdf(j).download(b2bking_display_settings.offer_file_name+".pdf",function(){var i=600-(Date.now()-n);i<1&&(i=1),setTimeout(function(){t(e).html('<svg class="b2bking_myaccount_individual_offer_bottom_line_button_icon" xmlns="http://www.w3.org/2000/svg" width="21" height="19" fill="none" viewBox="0 0 23 23" style="display: block;"><path fill="#fff" d="M11.5 1.438a10.063 10.063 0 1 0 0 20.125 10.063 10.063 0 0 0 0-20.125Zm-1.438 14.08L6.47 11.924l1.143-1.143 2.45 2.451 5.326-5.326 1.148 1.14-6.474 6.472Z"></path></svg> PDF'),t(e).find(".b2bking_loader_icon_button").css("display","none")},i)})}),t(".b2bking_country_field_req_required").prop("required","true"),t(".b2bking_custom_field_req_required select").prop("required","true"),r(),1===parseInt(b2bking_display_settings.enable_registration_fields_checkout)&&(t(".country_to_state").trigger("change"),t("#b2bking_registration_roles_dropdown").change(r),t(".b2bking_country_field_selector select").change(r),t("select#billing_country").change(r)),t("#billing_country").on("change",function(){setTimeout(function(){t(document.body).trigger("update_checkout")},1750)}),jQuery("body").on("change",'input[name="payment_method"]',function(){1===parseInt(b2bking_display_settings.enable_payment_method_change_refresh)&&setTimeout(function(){jQuery(document.body).trigger("update_checkout")},250)}),t(document).on("updated_checkout",function(){let e=t("#b2bking_custom_billing_vat_countries_field input").val(),n=t("#billing_country").val();void 0!==e&&(e.includes(n)&&0!==n.trim().length?(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_visible"),t(".b2bking_vat_field_required_1 .optional").after('<abbr class="required" title="required">*</abbr>'),t(".b2bking_vat_field_required_1 .optional").remove(),t(".b2bking_vat_field_required_1 input").prop("required","true")):(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_hidden"),t(".b2bking_vat_field_required_1 input").removeAttr("required")))}),t("body").on("click","#b2bking_checkout_registration_validate_vat_button",function(){t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.validating);var e="",n=t("#b2bking_vat_number_registration_field_number").val();if(n&&""!==n.trim()){var i=t("#shipping-b2bking-b2bking_custom_field_"+n).val();i&&""!==i.trim()&&(e=i.trim())}if(!e||""===e){var _=t("#b2bking_vat_number_registration_field").val();if(_&&""!==_.trim())e=_.trim();else{var r=t('.b2bking_vat_field_container input[type="text"]').val();r&&""!==r.trim()&&(e=r.trim())}}if(void 0===(s=t("#billing_country").val()))var s=t("#shipping-country").val();var b={action:"b2bkingvalidatevat",security:b2bking_display_settings.security,vat:e,country:s};t.post(b2bking_display_settings.ajaxurl,b,function(n){"valid"===n?(o("b2bking_validated_vat_status","validated_vat",!1),o("b2bking_validated_vat_number",e,!1),t("#b2bking_vat_number_registration_field").prop("readonly",!0),t("#b2bking_checkout_registration_validate_vat_button").prop("disabled",!0),t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.vatvalid),t(document.body).trigger("update_checkout"),wp.data.dispatch("wc/store/cart").invalidateResolutionForStore(),wp.data.dispatch("wc/store/checkout").invalidateResolutionForStore(),void 0!==jQuery(".wc-block-components-address-form-wrapper")&&window.location.reload()):"invalid"===n?(a("b2bking_validated_vat_status"),t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.vatinvalid)):"invalidcountry"===n&&(a("b2bking_validated_vat_status"),t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.vatinvalidcountry))})}),t("body").on("change",".woocommerce-checkout #billing_country, .wc-block-checkout #billing-country, .wc-block-checkout #shipping-country",function(){a("b2bking_validated_vat_status"),t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.validatevat),t("#b2bking_vat_number_registration_field").prop("readonly",!1),t("#b2bking_vat_number_registration_field").val(""),t("#b2bking_checkout_registration_validate_vat_button").prop("disabled",!1),t(document.body).trigger("update_checkout")}),1===parseInt(b2bking_display_settings.differentdeliverycountrysetting)&&t("#shipping_country").change(function(){var e={action:"b2bkingcheckdeliverycountryvat",security:b2bking_display_settings.security,deliverycountry:t("#shipping_country").val()};t.post(b2bking_display_settings.ajaxurl,e,function(e){setTimeout(function(){t(document.body).trigger("update_checkout")},250)})}),0===parseInt(b2bking_display_settings.disable_checkout_required_validation)&&jQuery(function(t){t("form.woocommerce-checkout").on("click","#place_order",function(e){var n="no",i=t(".b2bking_custom_field_req_required");t.each(i,function(e,i){if("none"!==t(i).parent().parent().css("display")&&"none"!==t(i).parent().css("display")&&(!i.value||"checkbox"===i.type)){let e=t(i).parent().find("label").text().slice(0,-2);if(""===e){let e=t(i).parent().parent().find("label").text().slice(0,-2);alert(e+" "+b2bking_display_settings.is_required)}else alert(e+" "+b2bking_display_settings.is_required);n="yes"}}),"yes"===n?(e.preventDefault(),t("#b2bking_js_based_invalid").val("invalid")):t("#b2bking_js_based_invalid").val("0")})}),t("button.woocommerce-form-register__submit").on("click",function(e){"none"!==t(".b2bking_country_field_selector").parent().css("display")&&"default"===t(".b2bking_country_field_selector select").val()&&(e.preventDefault(),alert(b2bking_display_settings.must_select_country))}),t("body").on("click",".b2bking_subaccounts_container_top_button",function(){t(".b2bking_subaccounts_new_account_container").css("display","block"),t(".b2bking_subaccounts_account_container").css("display","none"),t(".b2bking_subaccounts_container_top_button").css("display","none")}),t("body").on("click",".b2bking_subaccounts_new_account_container_top_close",function(){t(".b2bking_subaccounts_new_account_container").css("display","none"),t(".b2bking_subaccounts_account_container").css("display","block"),t(".b2bking_subaccounts_container_top_button").css("display","inline-flex")}),t("body").on("click",".b2bking_subaccounts_new_account_container_content_bottom_button",function(){t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html("");let e="",n=123;0===parseInt(b2bking_display_settings.disable_username_subaccounts)&&(n=t('input[name="b2bking_subaccounts_new_account_username"]').val().trim());let i=t('input[name="b2bking_subaccounts_new_account_email_address"]').val().trim(),_=t('input[name="b2bking_subaccounts_new_account_password"]').val().trim();if(0===parseInt(b2bking_display_settings.disable_username_subaccounts)&&!1===/^(?!.*[_.]$)(?=.{8,30}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._-\d@]+$/.test(n)&&(e+=b2bking_display_settings.newSubaccountUsernameError),!1===/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)&&(e+=b2bking_display_settings.newSubaccountEmailError),!1===/^(?=.*[A-Za-z])(?=.*[\d]).{8,}$/.test(_)&&(e+=b2bking_display_settings.newSubaccountPasswordError),""!==e)t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html(e);else{let e=t('input[name="b2bking_subaccounts_new_account_name"]').val().trim(),a=t('input[name="b2bking_subaccounts_new_account_last_name"]').val().trim(),s=t('input[name="b2bking_subaccounts_new_account_job_title"]').val().trim(),b=t('input[name="b2bking_subaccounts_new_account_phone_number"]').val().trim(),c=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy"]').prop("checked"),l=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy_approval"]').prop("checked"),d=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_orders"]').prop("checked"),u=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_subscriptions"]').prop("checked"),g=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_offers"]').prop("checked"),p=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_conversations"]').prop("checked"),k=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_lists"]').prop("checked");var r=t(".b2bking_subaccounts_new_account_container_content_bottom_button").html();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_subaccounts_new_account_container_content_bottom_button_icon"),t(".b2bking_subaccounts_new_account_container_content_bottom_button_icon").remove();var o={action:"b2bking_create_subaccount",security:b2bking_display_settings.security,username:n,password:_,name:e,lastName:a,jobTitle:s,email:i,phone:b,permissionBuy:c,permissionBuyApproval:l,permissionViewOrders:d,permissionViewSubscriptions:u,permissionViewOffers:g,permissionViewConversations:p,permissionViewLists:k};jQuery("#b2bking_custom_new_subaccount_fields").val().split(";").forEach(function(t){let e=jQuery('input[name="'+t+'"]').val();""!==e&&void 0!==e||(e=jQuery('select[name="'+t+'"]').val()),o[t]=e}),t.post(b2bking_display_settings.ajaxurl,o,function(e){e.startsWith("error")?(console.log(e),t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html(b2bking_display_settings.newSubaccountAccountError+" "+e.substring(5)),t(".b2bking_subaccounts_new_account_container_content_bottom_button").html(r)):"error_maximum_subaccounts"===e?(t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html(b2bking_display_settings.newSubaccountMaximumSubaccountsError),t(".b2bking_subaccounts_new_account_container_content_bottom_button").html(r)):window.location=b2bking_display_settings.subaccountsurl})}}),t("body").on("click",".b2bking_subaccounts_edit_account_container_content_bottom_button",function(){let e=t(".b2bking_subaccounts_edit_account_container_content_bottom_button").val().trim(),n=t('input[name="b2bking_subaccounts_new_account_name"]').val().trim(),i=t('input[name="b2bking_subaccounts_new_account_last_name"]').val().trim(),_=t('input[name="b2bking_subaccounts_new_account_job_title"]').val().trim(),r=t('input[name="b2bking_subaccounts_new_account_phone_number"]').val().trim(),o=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy"]').prop("checked"),a=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy_approval"]').prop("checked"),s=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_orders"]').prop("checked"),b=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_subscriptions"]').prop("checked"),c=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_offers"]').prop("checked"),l=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_conversations"]').prop("checked"),d=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_lists"]').prop("checked");t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_subaccounts_edit_account_container_content_bottom_button .b2bking_subaccounts_new_account_container_content_bottom_button_icon"),t(".b2bking_subaccounts_edit_account_container_content_bottom_button .b2bking_subaccounts_new_account_container_content_bottom_button_icon").remove();var u={action:"b2bking_update_subaccount",security:b2bking_display_settings.security,subaccountId:e,name:n,lastName:i,jobTitle:_,phone:r,permissionBuy:o,permissionBuyApproval:a,permissionViewOrders:s,permissionViewSubscriptions:b,permissionViewOffers:c,permissionViewConversations:l,permissionViewLists:d};jQuery("#b2bking_custom_new_subaccount_fields").val().split(";").forEach(function(t){let e=jQuery('input[name="'+t+'"]').val();""!==e&&void 0!==e||(e=jQuery('select[name="'+t+'"]').val()),console.log(e),u[t]=e}),t.post(b2bking_display_settings.ajaxurl,u,function(t){window.location=b2bking_display_settings.subaccountsurl})}),t(".b2bking_subaccounts_edit_account_container_top_close").on("click",function(){window.location=b2bking_display_settings.subaccountsurl}),t(".b2bking_subaccounts_edit_account_container_content_bottom_button_delete").on("click",function(){if(confirm(b2bking_display_settings.are_you_sure_delete)){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_subaccounts_edit_account_container_content_bottom_button_delete .b2bking_subaccounts_new_account_container_content_bottom_button_icon"),t(".b2bking_subaccounts_edit_account_container_content_bottom_button_delete .b2bking_subaccounts_new_account_container_content_bottom_button_icon").remove();var e={action:"b2bkingrejectuser",security:b2bking_display_settings.security,user:t(".b2bking_subaccounts_edit_account_container_content_bottom_button").val().trim(),issubaccount:"yes"};t.post(b2bking_display_settings.ajaxurl,e,function(t){window.location=b2bking_display_settings.subaccountsurl})}}),s(),t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy').on("change",s),t("body").on("click","#b2bking_approve_order",function(){let e=t("#b2bking_order_number").val();if(confirm(b2bking_display_settings.approve_order_confirm)){var n={action:"b2bking_approve_order",security:b2bking_display_settings.security,orderid:e};t.post(b2bking_display_settings.ajaxurl,n,function(e){0===parseInt(b2bking_display_settings.approve_order_redirect_payment)?window.location.reload():window.location=t("#b2bking_pay_now_url").val()})}}),t("body").on("click","#b2bking_reject_order",function(){let e=t("#b2bking_order_number").val();if(confirm(b2bking_display_settings.reject_order_confirm)){var n=window.prompt(b2bking_display_settings.reject_order_email,""),i={action:"b2bking_reject_order",security:b2bking_display_settings.security,orderid:e,reason:n};t.post(b2bking_display_settings.ajaxurl,i,function(t){window.location.reload()})}}),t("#b2bking_reject_order_subaccount").on("click",function(){let e=t("#b2bking_order_number").val();if(confirm(b2bking_display_settings.cancel_order_confirm)){var n={action:"b2bking_reject_order",security:b2bking_display_settings.security,orderid:e,reason:""};t.post(b2bking_display_settings.ajaxurl,n,function(t){window.location.reload()})}}),t("body").on("click",".b2bking_bulkorder_cream_name select",function(t){t.preventDefault(),t.stopPropagation()}),1===parseInt(b2bking_display_settings.form_enforce_qty)&&t("body").on("input",".b2bking_bulkorder_form_container_content_line_qty_indigo",function(e){let n=parseInt(t(this).val()),i=parseInt(t(this).attr("min")),_=parseInt(t(this).attr("max"));n<i?t(this).val(i):n>_&&t(this).val(_)});var b=b2bking_display_settings.currency_symbol+"0";1===parseInt(b2bking_display_settings.accountingsubtotals)&&(b=b2bking_display_settings.price0),1===parseInt(b2bking_display_settings.quotes_enabled)&&(b=b2bking_display_settings.quote_text),t(".b2bking_bulkorder_form_container_newline_button").on("click",function(){var e=t(".b2bking_bulkorder_form_newline_template").html();e=(e=e.replace("pricetext",b)).replace("display:none","display:initial"),t(".b2bking_bulkorder_form_container_newline_container").before(e)}),t(".b2bking_bulkorder_form_container_bottom_save_button").on("click",function(){let e=window.prompt(b2bking_display_settings.save_list_name,"");if(""!==e&&null!==e){let _="";if(document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach(function(e){var n=t(e).attr("class").split(/\s+/);t.each(n,function(n,i){if(i.includes("b2bking_selected_product_id_")){let n=i.split("_")[4],r=t(e).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();(r>0||1===parseInt(b2bking_display_settings.lists_zero_qty))&&(_+=n+":"+r+"|")}})}),""!==_){var n=t(".b2bking_bulkorder_form_container_bottom_save_button").html();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_save_button_icon"),t(".b2bking_bulkorder_form_container_bottom_save_button_icon").remove();let r="";Object.entries(u).forEach(function(t){let e=t[0],n=t[1],i=e.split("B2BKINGPRICE")[0];r+=i+":"+n+"|"});var i={action:"b2bking_bulkorder_save_list",security:b2bking_display_settings.security,productstring:_,title:e,pricelist:r};t.post(b2bking_display_settings.ajaxurl,i,function(e){t(".b2bking_bulkorder_form_container_bottom_save_button").html(n),alert(b2bking_display_settings.list_saved)})}else alert(b2bking_display_settings.list_empty)}});var c=!1;if(jQuery(".b2bking_bulkorder_container_final").length>1){Date.now();c=!0,setTimeout(function(){c=!1},5e3)}var l=Date.now();t("body").on("input",".b2bking_bulkorder_form_container_content_line_qty",function(e){if(1===parseInt(b2bking_display_settings.force_step_1)){let e=t(this).val();e%1!=0&&t(this).val(parseInt(e))}}),t("body").on("input",".b2bking_bulkorder_form_container_content_line_product",function(){let e=Date.now();l=e;let n=t(this).parent(),i=t(this).val(),_=t("#b2bking_bulkorder_searchby_select").val();void 0===_&&(_="productname"),n.find(".b2bking_bulkorder_form_container_content_line_livesearch").html('<img class="b2bking_loader_img" src="'+b2bking_display_settings.loaderurl+'">'),n.find(".b2bking_bulkorder_form_container_content_line_livesearch").css("display","block");var r=t(".b2bking_bulkorder_exclude").val(),o=t(".b2bking_bulkorder_product_list").val(),a=t(".b2bking_bulkorder_tag").val(),s=t(this).parent().parent().parent().parent().find(".b2bking_bulkorder_category").val(),b=t(".b2bking_bulkorder_sortby").val(),d=t(".b2bking_bulkorder_instock").val();i.length>0?setTimeout(function(){if(e===l||c){let q=(x=[],document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach(function(e){var n=t(e).attr("class").split(/\s+/);t.each(n,function(t,e){if(e.includes("b2bking_selected_product_id_")){let t=e.split("_")[4];x.push(t)}})}),x);i=i.trim();var w={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:i,exclude:r,tag:a,productlist:o,purchaselistid:t("#purchase_list_id").val(),category:s,sortby:b,instock:d,searchby:_,idsinform:JSON.stringify(q),dataType:"json",is_product:b2bking_display_settings.bulkorder_is_product,nonadaptive:jQuery(".b2bking_bulkorder_form_container").hasClass("nonadaptive")?1:0};t.post(b2bking_display_settings.ajaxurl,w,function(t){let i="",_=t;if(e===l||c){if(1234!==parseInt(_)){let t=JSON.parse(_);Object.keys(t).forEach(function(e){if(e.includes("B2BKINGPRICE"))u[e]=t[e];else if(e.includes("B2BTIERPRICE"))p[e]=t[e];else if(e.includes("B2BKINGSTOCK"))g[e]=t[e];else if(e.includes("B2BKINGIMAGE"))m[e]=t[e];else if(e.includes("B2BKINGMIN"))f[e]=t[e];else if(e.includes("B2BKINGMAX"))y[e]=t[e];else if(e.includes("B2BKINGSTEP"))v[e]=t[e];else if(e.includes("B2BKINGVAL"))h[e]=t[e];else if(e.includes("B2BKINGURL"))k[e]=t[e];else{let n;n=e.startsWith("product_")?e.replace("product_",""):e;let _=t[e];if(1===parseInt(b2bking_display_settings.bulkorderformimages)){let e=n+"B2BKINGIMAGE";"no"!==t[e]&&""!==t[e]&&null!==t[e]?i+='<div class="b2bking_livesearch_product_result productid_'+n+'">'+_+'<img class="b2bking_livesearch_image" src="'+t[e]+'"></div>':i+='<div class="b2bking_livesearch_product_result productid_'+n+'">'+_+"</div>"}else i+='<div class="b2bking_livesearch_product_result productid_'+n+'">'+_+"</div>"}})}else i='<span class="b2bking_classic_noproducts_found">'+b2bking_display_settings.no_products_found+"</span>";n.find(".b2bking_bulkorder_form_container_content_line_livesearch").html(i)}})}var x},600):n.find(".b2bking_bulkorder_form_container_content_line_livesearch").css("display","none")});var d,u=Object,g=Object,p=Object,k=Object,m=Object,f=Object,y=Object,v=Object,h=Object,w="yes";let x=t("#b2bking_initial_prices").val();if(void 0!==x){x.split("|").forEach(function(t){let e=t.split("-");""!==e[0]&&(u[e[0]+"B2BKINGPRICE"]=parseFloat(e[1]),p[e[0]+"B2BTIERPRICE"]=e[2],g[e[0]+"B2BKINGSTOCK"]=parseInt(e[3]))})}function q(e){for(var n=t(e).attr("class").split(/\s+/),i=null,_=0;_<n.length;_++){if(n[_].match(/^sum_up_variations_(\d+)$/)){i=n[_];break}}if(i){var r=t("."+i).not(e),o=0;return r.each(function(){var e=t(this).find(".b2bking_cream_select_checkbox");if(e.length>0&&e.is(":checked")){var n=t(this).find('.b2bking_bulkorder_form_container_content_line_qty[type="number"]');if(n.length>0){var i=parseFloat(n.val());isNaN(i)||(o+=i)}}}),o}return 0}function I(){let i=0,_=d.find(".b2bking_bulkorder_form_container_content_line_product"),r=t(_).parent();var o=t(_).attr("class").split(/\s+/);if(t.each(o,function(n,i){if(i.includes("b2bking_selected_product_id_")){let e=i.split("_")[4],n=t(_).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();if(n>0){let i=parseFloat(u[e+"B2BKINGPRICE"]),o=p[e+"B2BTIERPRICE"];if(0!==o){let _=n;if(void 0!==b2bking_display_settings.cart_quantities[e]){let t=parseInt(b2bking_display_settings.cart_quantities[e]);_=parseInt(n)+t}0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(_=parseInt(_)+parseInt(b2bking_display_settings.cart_quantities_cartqty));let a=q(r);_=parseInt(_)+parseInt(a);let s=o.split(";"),b=[],c=[];if(t.each(s,function(t,e){let n=e.split(":");n[0]=parseInt(n[0]);var i=n[1];void 0!==i&&(i=i.toString().replace(",",".")),n[1]=parseFloat(i),n[0]<=_&&(b.push(n[0]),c[n[0]]=n[1])}),b.length>0){let t=Math.max(...b),e=c[t];i>e&&(i=e)}}let a=i*n;a=parseFloat(a.toFixed(b2bking_display_settings.woo_price_decimals)),t(_).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").attr("data-value",a),setTimeout(function(){if(1===parseInt(b2bking_display_settings.accountingsubtotals)){var e={action:"b2bking_accountingsubtotals",security:b2bking_display_settings.security,pricesent:a};t.post(b2bking_display_settings.ajaxurl,e,function(e){t(_).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").html(e)})}else t(_).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").text(b2bking_display_settings.currency_symbol+a.toFixed(b2bking_display_settings.woo_price_decimals))},100)}else if(1===parseInt(b2bking_display_settings.accountingsubtotals)){var o={action:"b2bking_accountingsubtotals",security:b2bking_display_settings.security,pricesent:0};t.post(b2bking_display_settings.ajaxurl,o,function(e){t(_).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").html(e)})}else t(_).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").text(b2bking_display_settings.currency_symbol+0)}else if(void 0===e&&""===t(_).val())if(1===parseInt(b2bking_display_settings.accountingsubtotals)){o={action:"b2bking_accountingsubtotals",security:b2bking_display_settings.security,pricesent:0};t.post(b2bking_display_settings.ajaxurl,o,function(e){t(_).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").html(e)})}else t(_).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").text(b2bking_display_settings.currency_symbol+0)}),document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach(function(e){let _=t(e).parent();var r=t(e).attr("class").split(/\s+/);t.each(r,function(r,o){if(o.includes("b2bking_selected_product_id_")){let r=o.split("_")[4],s=t(e).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();if(s>0){let o=parseFloat(u[r+"B2BKINGPRICE"]),b=p[r+"B2BTIERPRICE"];if(0!==b){let e=s;if(void 0!==b2bking_display_settings.cart_quantities[r]){let t=parseInt(b2bking_display_settings.cart_quantities[r]);e=parseInt(s)+t}0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(e=parseInt(s)+parseInt(b2bking_display_settings.cart_quantities_cartqty));var a=q(_);e=parseInt(e)+parseInt(a);let n=b.split(";"),i=[],c=[];if(t.each(n,function(t,n){let _=n.split(":");_[0]=parseInt(_[0]);var r=_[1];void 0!==r&&(r=r.toString().replace(",",".")),_[1]=parseFloat(r),_[0]<=e&&(i.push(_[0]),c[_[0]]=_[1])}),i.length>0){let t=Math.max(...i),e=c[t];o>e&&(o=e)}}let c=o*s;c=parseFloat(c.toFixed(b2bking_display_settings.woo_price_decimals)),i+=c,i=parseFloat(i.toFixed(b2bking_display_settings.woo_price_decimals)),n(_)&&(t(e).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").attr("data-value",c),setTimeout(function(){if(1===parseInt(b2bking_display_settings.accountingsubtotals)){var n={action:"b2bking_accountingsubtotals",security:b2bking_display_settings.security,pricesent:c};t.post(b2bking_display_settings.ajaxurl,n,function(n){t(e).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").html(n)})}else t(e).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").text(b2bking_display_settings.currency_symbol+c.toFixed(b2bking_display_settings.woo_price_decimals))},100))}}})}),1===parseInt(b2bking_display_settings.accountingsubtotals)){var a={action:"b2bking_accountingsubtotals",security:b2bking_display_settings.security,pricesent:i};t.post(b2bking_display_settings.ajaxurl,a,function(e){t(".b2bking_bulkorder_form_container_bottom_total .woocommerce-Price-amount").html(e)})}else t(".b2bking_bulkorder_form_container_bottom_total .woocommerce-Price-amount").text(b2bking_display_settings.currency_symbol+i);t(document.body).trigger("b2bking_calculate_orderform_end")}if(t("body").on("click",".b2bking_livesearch_product_result",function(){let e=t(this).text(),n=t(this).parent().parent();d=n;var i=t(this).attr("class").split(/\s+/);t.each(i,function(t,i){if(i.includes("productid")){let t=i.split("_")[1];n.find(".b2bking_bulkorder_form_container_content_line_product").val(e),n.find(".b2bking_bulkorder_form_container_content_line_product").css("color",b2bking_display_settings.colorsetting),n.find(".b2bking_bulkorder_form_container_content_line_product").css("font-weight","bold"),n.find(".b2bking_bulkorder_form_container_content_line_product").addClass("b2bking_selected_product_id_"+t),n.find(".b2bking_bulkorder_form_container_content_line_product").after('<button class="b2bking_bulkorder_clear">'+b2bking_display_settings.clearx+"</button>"),n.find(".b2bking_bulkorder_form_container_content_line_qty").val(1),setTimeout(function(){n.find(".b2bking_bulkorder_form_container_content_line_product").prop("readonly",!0),n.find(".b2bking_bulkorder_form_container_content_line_livesearch").css("display","none")},125),null!==g[t+"B2BKINGSTOCK"]&&n.find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",g[t+"B2BKINGSTOCK"]),null!==g[t+"B2BKINGMIN"]&&n.find(".b2bking_bulkorder_form_container_content_line_qty").attr("min",g[t+"B2BKINGMIN"]),null!==g[t+"B2BKINGSTEP"]&&n.find(".b2bking_bulkorder_form_container_content_line_qty").attr("step",g[t+"B2BKINGSTEP"]),null!==g[t+"B2BKINGVAL"]&&n.find(".b2bking_bulkorder_form_container_content_line_qty").val(g[t+"B2BKINGVAL"]),null!==k[t+"B2BKINGURL"]&&(n.find(".b2bking_bulkorder_form_container_content_line_product").addClass("b2bking_bulkorder_form_container_content_line_product_url"),n.find(".b2bking_bulkorder_form_container_content_line_product").attr("data-url",k[t+"B2BKINGURL"]))}}),1!==parseInt(b2bking_display_settings.quotes_enabled)&&I()}),t("body").on("click",".b2bking_bulkorder_clear",function(){let e=t(this).parent();d=e;let n=e.find(".b2bking_bulkorder_form_container_content_line_product"),i=e.find(".b2bking_bulkorder_form_container_content_line_qty");n.prop("disabled",!1),n.prop("readonly",!1),i.removeAttr("max"),i.removeAttr("min"),i.removeAttr("step"),n.removeAttr("style"),n.val(""),i.val("");var _=n.attr("class").split(/\s+/);t.each(_,function(t,e){e.includes("b2bking_selected_product_id_")&&n.removeClass(e)}),1!==parseInt(b2bking_display_settings.quotes_enabled)&&I(),t(e).find(".b2bking_bulkorder_form_container_content_line_product_url").removeAttr("data-url"),t(e).find(".b2bking_bulkorder_form_container_content_line_product_url").removeClass("b2bking_bulkorder_form_container_content_line_product_url"),t(this).remove()}),t(".b2bking_bulkorder_form_container_bottom_add_button").on("click",function(){let e="",n=t(this).val();if(document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach(function(n){var i=t(n).attr("class").split(/\s+/);t.each(i,function(i,_){if(_.includes("b2bking_selected_product_id_")){let i=_.split("_")[4],r=t(n).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();r>0&&(e+=i+":"+r+"|")}})}),""!==e){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_add_button_icon"),t(".b2bking_bulkorder_form_container_bottom_add_button_icon").remove();var i={action:"b2bking_bulkorder_add_cart",security:b2bking_display_settings.security,productstring:e,listval:n};t.post(b2bking_display_settings.ajaxurl,i,function(e){if(1===parseInt(b2bking_display_settings.redirect_cart_add_cart_classic_form))window.location=b2bking_display_settings.carturl;else{let e='<svg class="b2bking_bulkorder_form_container_bottom_add_button_icon" xmlns="http://www.w3.org/2000/svg" width="21" height="19" fill="none" viewBox="0 0 21 19"><path fill="#fff" d="M18.401 11.875H7.714l.238 1.188h9.786c.562 0 .978.53.854 1.087l-.202.901a2.082 2.082 0 011.152 1.87c0 1.159-.93 2.096-2.072 2.079-1.087-.016-1.981-.914-2.01-2.02a2.091 2.091 0 01.612-1.543H8.428c.379.378.614.903.614 1.485 0 1.18-.967 2.131-2.14 2.076-1.04-.05-1.886-.905-1.94-1.964a2.085 2.085 0 011.022-1.914L3.423 2.375H.875A.883.883 0 010 1.485V.89C0 .399.392 0 .875 0h3.738c.416 0 .774.298.857.712l.334 1.663h14.32c.562 0 .978.53.854 1.088l-1.724 7.719a.878.878 0 01-.853.693zm-3.526-5.64h-1.75V4.75a.589.589 0 00-.583-.594h-.584a.589.589 0 00-.583.594v1.484h-1.75a.589.589 0 00-.583.594v.594c0 .328.26.594.583.594h1.75V9.5c0 .328.261.594.583.594h.584a.589.589 0 00.583-.594V8.016h1.75a.589.589 0 00.583-.594v-.594a.589.589 0 00-.583-.594z"></path></svg>';t(".b2bking_bulkorder_form_container_bottom_add_button").html(e+b2bking_display_settings.added_cart),t(document.body).trigger("wc_fragment_refresh")}})}}),t("body").on("input",".b2bking_bulkorder_form_container_content_line_qty",function(){var e=parseInt(t(this).attr("max")),n=t(this).parent().find(".b2bking_bulkorder_form_container_content_line_product"),i=t(n).attr("class"),_="";void 0===i&&(n=t(this).parent().parent().parent().find(".b2bking_bulkorder_form_container_content_line_product"),i=t(n).attr("class"),_="cream");var r=0,o=i.split(/\s+/);t.each(o,function(t,e){e.includes("b2bking_selected_product_id_")&&(r=e.split("_")[4])});let a=t(this).val();var s=0;if(void 0!==b2bking_display_settings.cart_quantities[r]&&(s=parseInt(b2bking_display_settings.cart_quantities[r]),a=parseInt(a)+s),0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(s=parseInt(b2bking_display_settings.cart_quantities_cartqty),a=parseInt(a)+s),a>e){t(this).val(e-s);let n=t(this).parent(),i=b2bking_display_settings.max_items_stock;if(i=i.replace("%s",e),n.find(".b2bking_bulkorder_form_container_content_line_product").val()!==i){let t=n.find(".b2bking_bulkorder_form_container_content_line_product").val(),e=n.find(".b2bking_bulkorder_form_container_content_line_product").css("color");n.find(".b2bking_bulkorder_form_container_content_line_product").val(i),n.find(".b2bking_bulkorder_form_container_content_line_product").css("color","rgb(194 25 25)"),setTimeout(function(){n.find(".b2bking_bulkorder_form_container_content_line_product").val(t),n.find(".b2bking_bulkorder_form_container_content_line_product").css("color",e)},1200)}}d=t(this).parent(),"cream"===_&&(d=t(this).parent().parent().parent()),1!==parseInt(b2bking_display_settings.quotes_enabled)&&I()}),void 0!==e){function K(e){var n={action:"b2bking_bulkorder_add_multiple",security:b2bking_display_settings.security,additions:JSON.stringify(e)};t.post(b2bking_display_settings.ajaxurl,n,function(n){var i=n;e.forEach(function(e){var n=e.thisbutton,_=e.qtyaddable,r=e.productqty;t(n).removeClass("b2bking_low_in_stock"),t(n).removeClass("b2bking_none_in_stock");let o=parseInt(t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text()),a=parseInt(r)+o;if(1!==parseInt(b2bking_display_settings.force_step_1)&&(o=parseFloat(t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text()),a=parseFloat(r)+o,a=a.toFixed(b2bking_display_settings.woo_price_decimals)),t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text(a),t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").removeClass("b2bking_cream_product_nr_icon_hidden"),"cart"===b2bking_display_settings.cream_form_cart_button){let e=parseInt(t(".b2bking_cream_cart_button_items_qty").text()),n=parseInt(r)+e;1!==parseInt(b2bking_display_settings.force_step_1)&&(e=parseFloat(t(".b2bking_cream_cart_button_items_qty").text()),n=parseFloat(r)+e,n=n.toFixed(b2bking_display_settings.woo_price_decimals)),t(".b2bking_cream_cart_button_price").html(i),t(".b2bking_cream_cart_button_items_qty").text(n),t(".b2bking_orderform_cart").removeClass("b2bking_orderform_cart_inactive")}if("carticon"===b2bking_display_settings.cream_form_cart_button){let e=parseInt(t("#b2bking_bulkorder_cream_filter_cart_text").text()),n=parseInt(r)+e;1!==parseInt(b2bking_display_settings.force_step_1)&&(e=parseFloat(t("#b2bking_bulkorder_cream_filter_cart_text").text()),n=parseFloat(r)+e,n=n.toFixed(b2bking_display_settings.woo_price_decimals)),t("#b2bking_bulkorder_cream_filter_cart_text").text(n),t(".b2bking_orderform_carticon").removeClass("b2bking_orderform_carticon_inactive")}"checkout"===b2bking_display_settings.cream_form_cart_button&&t(".b2bking_orderform_checkout").removeClass("b2bking_orderform_checkout_inactive");let s=_-r;s>0?(t(n).html(b2bking_display_settings.add_more_indigo),t(n).addClass("b2bking_add_more_button"),s<r&&t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(s)):(t(n).addClass("b2bking_none_in_stock"),t(n).html("0 "+b2bking_display_settings.left_in_stock),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(0),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",0))}),t(document.body).trigger("b2bking_added_item_cart"),t(document.body).trigger("b2bking_multiadded_item_cart"),t(document.body).trigger("wc_fragment_refresh"),1===parseInt(b2bking_display_settings.added_cart_event)&&jQuery(document.body).trigger("added_to_cart"),jQuery(".b2bking_cream_select_checkbox").each(function(t){jQuery(this).prop("checked",!1).trigger("input")}),t(".b2bking_cream_add_selected_cart_icon").removeClass("b2bking_invisible_img"),t(".b2bking_cream_add_selected_loader_icon").addClass("b2bking_invisible_img"),jQuery("#b2bking_cream_view_cart").removeClass("hidden"),jQuery(".b2bking_cream_view_cart_price").html(i)})}function G(e,n,i,_,r="no"){if(9875678===e)t(n).addClass("b2bking_none_in_stock"),t(n).html(b2bking_display_settings.already_in_cart),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(0),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",0);else if(e>=i&&0!==i){var o={action:"b2bking_bulkorder_add_cart_item",security:b2bking_display_settings.security,productid:_,productqty:i},a=[];jQuery(".variation_"+_).each(function(e){a.push(t(this).attr("id")+"="+t(this).val())}),o.attributes=a;var s=[];if(jQuery(".customdata_"+_).each(function(e){s.push(t(this).val())}),o.customdata=s,"no"!==r)return o.qtyaddable=e,o.thisbutton=n,o;F(o,n,i,e)}else 0===e?(t(n).addClass("b2bking_none_in_stock"),t(n).html("0 "+b2bking_display_settings.left_in_stock),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(0),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",0)):(t(n).html(b2bking_display_settings.left_in_stock_low_left+e+b2bking_display_settings.left_in_stock_low_right),t(n).addClass("b2bking_low_in_stock"),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(e),setTimeout(function(){t(n).removeClass("b2bking_low_in_stock"),t(n).html(b2bking_display_settings.add_to_cart)},2500))}function F(e,n,i,_){"yes"===w?(w="no",t.post(b2bking_display_settings.ajaxurl,e,function(e){let r=e;jQuery(".b2bking_cream_view_cart_price").html(r),t(n).parent().parent().parent().find(".b2bking_cream_select_checkbox").prop("checked",!1).trigger("input"),t(n).removeClass("b2bking_low_in_stock"),t(n).removeClass("b2bking_none_in_stock"),t(document.body).trigger("wc_fragment_refresh"),1===parseInt(b2bking_display_settings.added_cart_event)&&jQuery(document.body).trigger("added_to_cart");let o=parseInt(t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text()),a=parseInt(i)+o;if(1!==parseInt(b2bking_display_settings.force_step_1)&&(o=parseFloat(t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text()),a=parseFloat(i)+o,a=a.toFixed(b2bking_display_settings.woo_price_decimals)),t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text(a),t(n).parent().parent().parent().find(".b2bking_cream_product_nr_icon").removeClass("b2bking_cream_product_nr_icon_hidden"),"cart"===b2bking_display_settings.cream_form_cart_button){let e=parseInt(t(".b2bking_cream_cart_button_items_qty").text()),n=parseInt(i)+e;1!==parseInt(b2bking_display_settings.force_step_1)&&(e=parseFloat(t(".b2bking_cream_cart_button_items_qty").text()),n=parseFloat(i)+e,n=n.toFixed(b2bking_display_settings.woo_price_decimals)),t(".b2bking_cream_cart_button_price").html(r),t(".b2bking_cream_cart_button_items_qty").text(n),t(".b2bking_orderform_cart").removeClass("b2bking_orderform_cart_inactive")}if("carticon"===b2bking_display_settings.cream_form_cart_button){let e=parseInt(t("#b2bking_bulkorder_cream_filter_cart_text").text()),n=parseInt(i)+e;1!==parseInt(b2bking_display_settings.force_step_1)&&(e=parseFloat(t("#b2bking_bulkorder_cream_filter_cart_text").text()),n=parseFloat(i)+e,n=n.toFixed(b2bking_display_settings.woo_price_decimals)),t("#b2bking_bulkorder_cream_filter_cart_text").text(n),t(".b2bking_orderform_cart").removeClass("b2bking_orderform_cart_inactive"),t(".b2bking_orderform_carticon").removeClass("b2bking_orderform_carticon_inactive")}"checkout"===b2bking_display_settings.cream_form_cart_button&&t(".b2bking_orderform_checkout").removeClass("b2bking_orderform_checkout_inactive");let s=_-i;s>0?(t(n).html(b2bking_display_settings.add_more_indigo),t(n).addClass("b2bking_add_more_button"),s<i&&t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(s)):(t(n).addClass("b2bking_none_in_stock"),t(n).html("0 "+b2bking_display_settings.left_in_stock),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(0),t(n).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",0)),t(document.body).trigger("b2bking_added_item_cart"),setTimeout(function(){w="yes"},500)})):setTimeout(function(){F(e,n,i,_)},100)}function A(){var t=0;return jQuery(".b2bking_cream_select_checkbox").each(function(e){if(jQuery(this).prop("checked")){parseInt(jQuery(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val())>0&&(t+=parseFloat(jQuery(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_subtotal_cream").attr("data-value")))}}),t}function V(){var t,e=(t=0,jQuery(".b2bking_cream_select_checkbox").each(function(e){jQuery(this).prop("checked")?(t+=parseInt(jQuery(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val()),jQuery(this).parent().parent().parent().addClass("b2bking_multiselected_row")):jQuery(this).parent().parent().parent().removeClass("b2bking_multiselected_row")}),t);e>0?(jQuery("#b2bking_cream_add_selected, .b2bking_auto_add_to_cart").addClass("active"),"number"===b2bking_display_settings.cream_multiselect_total?jQuery(".b2bking_cream_add_selected_number").html("&nbsp;("+e+")"):"total"===b2bking_display_settings.cream_multiselect_total&&jQuery(".b2bking_cream_add_selected_number").html("&nbsp;("+b2bking_display_settings.currency_symbol+A().toFixed(b2bking_display_settings.woo_price_decimals)+")"),R(),jQuery("#b2bking_cream_view_cart").addClass("hidden")):(jQuery("#b2bking_cream_add_selected, .b2bking_auto_add_to_cart").removeClass("active"),jQuery("#b2bking_cream_add_selected").removeClass("floating"),jQuery(".b2bking_cream_add_selected_number").html("")),parseInt(jQuery(".b2bking_bulkorder_bottom_total_value").length)>=1&&(O(),setTimeout(function(){O()},10))}function O(){let t=A().toFixed(b2bking_display_settings.woo_price_decimals),e=b2bking_display_settings.currency_symbol+t;jQuery(".b2bking_bulkorder_bottom_total_value").html(e),t>0?jQuery(".b2bking_bulkorder_bottom_total").removeClass("inactive"):jQuery(".b2bking_bulkorder_bottom_total").addClass("inactive")}function R(){const e=t("#b2bking_cream_add_selected");if(void 0!==e[0]&&jQuery("#b2bking_cream_add_selected").hasClass("active")){const n=t(".b2bking_bulkorder_form_container_bottom"),i=t(".b2bking_bulkorder_form_container"),_=n[0].getBoundingClientRect(),r=i[0].getBoundingClientRect();(_.top<0||_.top>window.innerHeight)&&r.top<window.innerHeight&&t(window).scrollTop()<_.top+t(document).scrollTop()?e.addClass("floating"):e.removeClass("floating")}}document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach(function(e){let n=t(e).val().split(" (")[0];var i={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:n,searchType:"purchaseListLoading",dataType:"json",is_product:b2bking_display_settings.bulkorder_is_product,nonadaptive:jQuery(".b2bking_bulkorder_form_container").hasClass("nonadaptive")?1:0};t.post(b2bking_display_settings.ajaxurl,i,function(t){let e=t;if('"empty"'!==e){let t=JSON.parse(e);Object.keys(t).forEach(function(e){e.includes("B2BKINGPRICE")?u[e]=t[e]:e.includes("B2BTIERPRICE")?p[e]=t[e]:e.includes("B2BKINGSTOCK")?g[e]=t[e]:e.includes("B2BKINGMIN")?f[e]=t[e]:e.includes("B2BKINGMAX")?y[e]=t[e]:e.includes("B2BKINGSTEP")?v[e]=t[e]:e.includes("B2BKINGVAL")&&(h[e]=t[e])})}});var _=0,r=t(e).attr("class").split(/\s+/);t.each(r,function(t,e){e.includes("b2bking_selected_product_id_")&&(_=e.split("_")[4])}),null!==g[_+"B2BKINGSTOCK"]&&t(e).parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",g[_+"B2BKINGSTOCK"]),d=t(e).parent(),1!==parseInt(b2bking_display_settings.quotes_enabled)&&I()}),t("body").on("click",".b2bking_cream_input_plus_button",function(){let e=t(this).parent().find("input");e[0].stepUp(1),t(e).trigger("input")}),t("body").on("click",".b2bking_cream_input_minus_button",function(){let e=t(this).parent().find("input");e[0].stepDown(1),t(e).trigger("input")}),t("body").on("click","#b2bking_cream_add_selected.active",function(){var e=[],n=[],i=!1;if(jQuery(".b2bking_cream_select_checkbox").each(function(_){if(jQuery(this).prop("checked")){var r=t(this).parent().parent().parent().find(".b2bking_bulkorder_cream_add");if(t(r).hasClass("b2bking_none_in_stock"))return!0;if(!t(r).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty")[0].checkValidity())return void t(r).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty")[0].reportValidity();let _=!1;if(jQuery(r).parent().parent().parent().find("select").each(function(e){if(!jQuery(this)[0].checkValidity())if("yes"===b2bking_display_settings.bulkorder_is_product&&"replace"===b2bking_display_settings.bulkorder_is_product_replace){let e=t(this).attr("id"),n=t(".variations #"+e).val();""!==n&&void 0!==n?t(this).val(n):(t(".variations #"+e).prop("required",!0),t(".variations #"+e)[0].reportValidity(),_=!0,i=!0)}else jQuery(this)[0].reportValidity(),_=!0,i=!0}),_)return;let b=t(r).parent().parent().find(".b2bking_bulkorder_form_container_content_line_product");var o=t(b).attr("class");void 0===o&&(b=t(r).parent().parent().parent().find(".b2bking_bulkorder_form_container_content_line_product"),o=t(b).attr("class"),"cream");var a=0,s=o.split(/\s+/);t.each(s,function(t,e){e.includes("b2bking_selected_product_id_")&&(a=e.split("_")[4])});let c=t(r).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();e.push([r,c,a]),n.push(a)}}),!i){t(".b2bking_cream_add_selected_cart_icon").addClass("b2bking_invisible_img"),t(".b2bking_cream_add_selected_loader_icon").removeClass("b2bking_invisible_img");var _={action:"b2bking_get_stock_quantity_addable_multiple",security:b2bking_display_settings.security,products:n};t.post(b2bking_display_settings.ajaxurl,_,function(t){var n=t.data,i=[];e.forEach(function(t){var e=t[0],_=t[1],r=t[2],o=G(n[r],e,_,r,"yes");i.push(o)}),K(i)})}}),t("body").on("click",".b2bking_bulkorder_indigo_add",function(){if(t(this).hasClass("configure")){let e=t(this).parent().parent().parent().find(".b2bking_bulkorder_indigo_product_container a").attr("href");return void window.open(e,"_blank")}if(t(this).hasClass("b2bking_cream_view_options_button"))return;if(t(this).hasClass("b2bking_none_in_stock"))return;if(0===parseInt(t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val()))return;if(!t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty")[0].checkValidity())return void t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty")[0].reportValidity();let e=!1;if(jQuery(this).parent().parent().parent().find("select").each(function(t){jQuery(this)[0].checkValidity()||(jQuery(this)[0].reportValidity(),e=!0)}),e)return;let n=t(this);t(this).hasClass("b2bking_none_in_stock")||t(this).html('<img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'">');let i=t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_product");var _=t(i).attr("class");void 0===_&&(i=t(this).parent().parent().parent().find(".b2bking_bulkorder_form_container_content_line_product"),_=t(i).attr("class"));var r=0,o=_.split(/\s+/);t.each(o,function(t,e){e.includes("b2bking_selected_product_id_")&&(r=e.split("_")[4])});let a=t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();var s={action:"b2bking_get_stock_quantity_addable",security:b2bking_display_settings.security,id:r},b=9999999;0===parseInt(b2bking_display_settings.b2bking_orderform_skip_stock_search)?t.post(b2bking_display_settings.ajaxurl,s,function(t){G(b=parseInt(t),n,a,r)}):G(b,n,a,r)}),t("body").on("click",".b2bking_orderform_cart",function(){var e=t(this).parent().parent().parent();t(e).find(".b2bking_orderform_cart").hasClass("b2bking_orderform_cart_inactive")||(window.location=b2bking_display_settings.carturl)}),t("body").on("click",".b2bking_orderform_carticon",function(){var e=t(this).parent().parent().parent();t(e).find(".b2bking_orderform_carticon").hasClass("b2bking_orderform_carticon_inactive")||(window.location=b2bking_display_settings.carturl)}),t("body").on("click",".b2bking_orderform_checkout",function(){var e=t(this).parent().parent().parent();t(e).find(".b2bking_orderform_checkout").hasClass("b2bking_orderform_checkout_inactive")||(window.location=b2bking_display_settings.checkouturl)}),t(".b2bking_bulkorder_search_text_indigo").not(".b2bking_bulkorder_search_text_cream").on("input",function(){var e=t(this),n=t(e).parent().parent().parent();let i=Date.now();l=i,t(this).length>0&&(t(n).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_loader_indigo_content"><img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'"></div>'),setTimeout(function(){if(i===l||c){var _=t(n).find(".b2bking_bulkorder_exclude").val(),r=t(n).find(".b2bking_bulkorder_product_list").val(),o=t(n).find(".b2bking_bulkorder_tag").val(),a=t(n).find(".b2bking_bulkorder_category").val(),s=t(n).find(".b2bking_bulkorder_sortby").val(),b=t(n).find(".b2bking_bulkorder_instock").val(),d={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:t(e).val(),dataType:"json",theme:"indigo",exclude:_,productlist:r,tag:o,purchaselistid:t("#purchase_list_id").val(),sortby:s,instock:b,category:a,is_product:b2bking_display_settings.bulkorder_is_product,nonadaptive:jQuery(".b2bking_bulkorder_form_container").hasClass("nonadaptive")?1:0};t.post(b2bking_display_settings.ajaxurl,d,function(e){let _=e,r="";if(i===l||c)if(1234!==parseInt(_)){let e=JSON.parse(_);Object.keys(e).forEach(function(t){t.includes("B2BKINGPRICE")?u[t]=e[t]:t.includes("B2BTIERPRICE")?p[t]=e[t]:t.includes("B2BKINGSTOCK")?g[t]=e[t]:t.includes("B2BKINGIMAGE")?m[t]=e[t]:t.includes("B2BKINGURL")?k[t]=e[t]:t.includes("B2BKINGMIN")?f[t]=e[t]:t.includes("B2BKINGMAX")?y[t]=e[t]:t.includes("B2BKINGSTEP")?v[t]=e[t]:t.includes("B2BKINGVAL")?h[t]=e[t]:t.includes("HTML")&&(r=e[t])}),t(n).find(".b2bking_bulkorder_form_container_content_indigo").html(r)}else t(n).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_bulkorder_indigo_noproducts">'+b2bking_display_settings.no_products_found+'</div><div class="b2bking_bulkorder_form_container_bottom b2bking_bulkorder_form_container_bottom_indigo"></div>')})}},400))}),jQuery(document).on("input",".b2bking_bulkorder_form_container_content_line_qty_cream",function(){0===parseInt(jQuery(this).val())?jQuery(this).parent().parent().parent().find(".b2bking_cream_select_checkbox").prop("checked",!1).trigger("input"):jQuery(this).parent().parent().parent().find(".b2bking_cream_select_checkbox").prop("checked",!0).trigger("input"),V(),n(jQuery(this).parent().parent().parent())&&1!==parseInt(b2bking_display_settings.quotes_enabled)&&I()}),jQuery(document).on("input",".b2bking_cream_select_checkbox",function(){d=t(this).parent().parent().parent(),V(),n(jQuery(this).parent().parent().parent())&&1!==parseInt(b2bking_display_settings.quotes_enabled)&&I()}),jQuery("body").on("click","#b2bking_cream_clear_all_selected",function(){jQuery(".b2bking_cream_select_checkbox").each(function(t){jQuery(this).prop("checked",!1),V()})}),jQuery("body").on("click",".b2bking_cream_view_cart_close",function(t){jQuery("#b2bking_cream_view_cart").addClass("hidden"),t.stopPropagation(),t.preventDefault()}),t(window).on("scroll resize",R),R(),t(".b2bking_orderform_filters").on("click",function(){var e=t(this).parent().parent().parent();jQuery("#b2bking_bulkorder_cream_filter_icon_attributes img").attr("src")===b2bking_display_settings.filters_close&&t(".b2bking_orderform_attributes").click(),t(e).find(".b2bking_bulkorder_form_cream_main_container").hasClass("b2bking_filters_open")?(t(e).find("#b2bking_bulkorder_cream_filter_icon img").attr("src",b2bking_display_settings.filters),t(e).find(".b2bking_orderform_filters").css("background","#fff"),t(e).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_open, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_open, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_open").addClass("b2bking_filters_closed").removeClass("b2bking_filters_open")):(t(e).find("#b2bking_bulkorder_cream_filter_icon img").attr("src",b2bking_display_settings.filters_close),t(e).find(".b2bking_orderform_filters").css("background","#f3f3f3"),t(e).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_closed, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_closed, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_closed").addClass("b2bking_filters_open").removeClass("b2bking_filters_closed")),t(e).find(".b2bking_bulkorder_form_container_cream_filters_content_first").css("display",""),t(e).find(".b2bking_bulkorder_form_container_cream_filters_content_second").css("display","none")}),t(".b2bking_orderform_attributes").on("click",function(){var e=t(this).parent().parent().parent();jQuery("#b2bking_bulkorder_cream_filter_icon img").attr("src")===b2bking_display_settings.filters_close&&t(".b2bking_orderform_filters").click(),t(e).find(".b2bking_bulkorder_form_cream_main_container").hasClass("b2bking_filters_open")?(t(e).find("#b2bking_bulkorder_cream_filter_icon_attributes img").attr("src",b2bking_display_settings.attributes),t(e).find(".b2bking_orderform_attributes").css("background","#fff"),t(e).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_open, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_open, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_open").addClass("b2bking_filters_closed").removeClass("b2bking_filters_open")):(t(e).find("#b2bking_bulkorder_cream_filter_icon_attributes img").attr("src",b2bking_display_settings.filters_close),t(e).find(".b2bking_orderform_attributes").css("background","#f3f3f3"),t(e).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_closed, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_closed, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_closed").addClass("b2bking_filters_open").removeClass("b2bking_filters_closed")),t(e).find(".b2bking_bulkorder_form_container_cream_filters_content_first").css("display","none"),t(e).find(".b2bking_bulkorder_form_container_cream_filters_content_second").css("display","")}),t(".b2bking_bulkorder_search_text_cream").on("input",function(){var e=t(this).parent().parent().parent().parent();0!==t(this).val().length?(t(e).find(".b2bking_bulkorder_cream_search_icon_clear").removeClass("b2bking_bulkorder_cream_search_icon_hide").addClass("b2bking_bulkorder_cream_search_icon_show"),t(e).find(".b2bking_bulkorder_cream_search_icon_search").removeClass("b2bking_bulkorder_cream_search_icon_show").addClass("b2bking_bulkorder_cream_search_icon_hide")):(t(e).find(".b2bking_bulkorder_cream_search_icon_clear").removeClass("b2bking_bulkorder_cream_search_icon_show").addClass("b2bking_bulkorder_cream_search_icon_hide"),t(e).find(".b2bking_bulkorder_cream_search_icon_search").removeClass("b2bking_bulkorder_cream_search_icon_hide").addClass("b2bking_bulkorder_cream_search_icon_show"))}),t(".b2bking_bulkorder_cream_search_icon_clear").on("click",function(){var e=t(this).parent().parent().parent().parent();t(e).find(".b2bking_bulkorder_search_text_cream").val(""),t(e).find(".b2bking_bulkorder_search_text_cream").trigger("input"),t(e).find(".b2bking_bulkorder_search_text_cream").focus()}),t(".b2bking_bulkorder_filters_list_attributes li").on("click",function(){let e=t(this).val();var n=t(this).parent().parent().parent().parent().parent().parent(),i=t(this).parent();t(i).find(".b2bking_attribute_value").val(e),t(n).find(".b2bking_bulkorder_search_text_indigo").trigger("input"),t(this).parent().find("li").each(function(e){t(this).css("text-decoration","none")}),t(this).css("text-decoration","underline")}),t(".b2bking_bulkorder_filters_list li").on("click",function(){let e=t(this).val();var n=t(this).parent().parent().parent().parent().parent().parent();t(n).find(".b2bking_bulkorder_category").val(e),t(n).find(".b2bking_bulkorder_search_text_indigo").trigger("input"),t(n).find(".b2bking_bulkorder_filters_list li").each(function(e){t(this).css("text-decoration","none")}),t(this).css("text-decoration","underline")}),t(".b2bking_bulkorder_filters_list_sortby li").on("click",function(){var e=t(this).parent().parent().parent().parent().parent().parent();let n=t(this).attr("value");t(e).find(".b2bking_bulkorder_sortby").attr("value",n),t(e).find(".b2bking_bulkorder_search_text_indigo").trigger("input"),t(e).find(".b2bking_bulkorder_filters_list_sortby li").each(function(e){t(this).css("text-decoration","none")}),t(this).css("text-decoration","underline")}),t(".b2bking_bulkorder_filters_list_instock li").on("click",function(){var e=t(this).parent().parent().parent().parent().parent().parent();let n=t(this).attr("value");t(e).find(".b2bking_bulkorder_instock").attr("value",n),t(e).find(".b2bking_bulkorder_search_text_indigo").trigger("input"),t(e).find(".b2bking_bulkorder_filters_list_instock li").each(function(e){t(this).css("text-decoration","none")}),t(this).css("text-decoration","underline")}),t(".b2bking_bulkorder_search_text_indigo.b2bking_bulkorder_search_text_cream").on("input",function(){let e=Date.now();var n=t(this),i=t(n).parent().parent().parent().parent();l=e,t(this).length>0&&(t(i).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_loader_indigo_content b2bking_loader_cream_content"><div class="b2bking_loading_products_wrapper"><div class="b2bking_loading_products_text">'+b2bking_display_settings.loading_products_text+'</div><img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'"></div></div>'),setTimeout(function(){if(e===l||c){var _=t(i).find(".b2bking_bulkorder_exclude").val(),r=t(i).find(".b2bking_bulkorder_product_list").val(),o=t(i).find(".b2bking_bulkorder_tag").val(),a=t(i).find(".b2bking_bulkorder_category").val(),s=t(i).find(".b2bking_bulkorder_sortby").val(),b=t(i).find(".b2bking_bulkorder_instock").val(),d=t(i).find(".b2bking_bulkorder_attributes").val(),w=d.split(",");if(jQuery(".b2bking_bulkorder_form_container_content_header_multiselect_cream").length)var x="yes";else x="no";var q={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:t(n).val(),dataType:"json",theme:"cream",multiselect:x,sku:t(i).find(".b2bking_order_form_show_sku").val(),stock:t(i).find(".b2bking_order_form_show_stock").val(),exclude:_,productlist:r,tag:o,purchaselistid:t("#purchase_list_id").val(),category:a,attributes:d,sortby:s,instock:b,is_product:b2bking_display_settings.bulkorder_is_product,nonadaptive:jQuery(".b2bking_bulkorder_form_container").hasClass("nonadaptive")?1:0};w.forEach(function(e){e=e.trim(),q["attr_"+e]=t(".b2bking_attribute_value_"+e).val()}),t.post(b2bking_display_settings.ajaxurl,q,function(n){let _=n,r="";if(e===l||c)if(1234!==parseInt(_)){let e=JSON.parse(_);Object.keys(e).forEach(function(t){t.includes("B2BKINGPRICE")?u[t]=e[t]:t.includes("B2BTIERPRICE")?p[t]=e[t]:t.includes("B2BKINGSTOCK")?g[t]=e[t]:t.includes("B2BKINGIMAGE")?m[t]=e[t]:t.includes("B2BKINGURL")?k[t]=e[t]:t.includes("B2BKINGMIN")?f[t]=e[t]:t.includes("B2BKINGMAX")?y[t]=e[t]:t.includes("B2BKINGSTEP")?v[t]=e[t]:t.includes("B2BKINGVAL")?h[t]=e[t]:t.includes("HTML")&&(r=e[t])}),t(i).find(".b2bking_bulkorder_form_container_content_indigo").html(r),t(document.body).trigger("b2bking_set_cream_table_finish"),"yes"===b2bking_display_settings.bulkorder_is_product&&E()}else t(i).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_bulkorder_indigo_noproducts b2bking_bulkorder_cream_noproducts"><img class="b2bking_bulkorder_cream_noproducts_img" src="'+b2bking_display_settings.no_products_found_img+'"><div class="b2bking_cream_noproductsfound_text">'+b2bking_display_settings.no_products_found+'</div></div><div class="b2bking_bulkorder_form_container_bottom b2bking_bulkorder_form_container_bottom_indigo b2bking_bulkorder_form_container_bottom_cream"></div>')})}},400))})}function j(e,n){jQuery("html, body").animate({scrollTop:jQuery(".b2bking_bulkorder_form_container").offset().top-150},100);var i=t(e).find(".b2bking_bulkorder_attributes").val(),_=i.split(","),r=t(".b2bking_bulkorder_form_container_content_header_multiselect_cream").length?"yes":"no",o={action:"b2bking_ajax_search",security:b2bking_display_settings.security,dataType:"json",multiselect:r,theme:b2bking_pagination_theme,sku:t(e).find(".b2bking_order_form_show_sku").val(),stock:t(e).find(".b2bking_order_form_show_stock").val(),searchValue:"",sortby:t(e).find(".b2bking_bulkorder_sortby").val(),instock:t(e).find(".b2bking_bulkorder_instock").val(),pagerequested:n.val(),category:t(e).find(".b2bking_bulkorder_category").val(),productlist:t(e).find(".b2bking_bulkorder_product_list").val(),tag:t(e).find(".b2bking_bulkorder_tag").val(),exclude:t(e).find(".b2bking_bulkorder_exclude").val(),attributes:i,paginationdata:b2bking_pagination_data,is_product:b2bking_display_settings.bulkorder_is_product,nonadaptive:t(".b2bking_bulkorder_form_container").hasClass("nonadaptive")?1:0,autoadd:t("#b2bking_auto_add_to_cart_checkbox").length&&t("#b2bking_auto_add_to_cart_checkbox").is(":checked")?"yes":"no",autoaddset:t("#b2bking_auto_add_to_cart_checkbox").length&&t(".b2bking_auto_add_to_cart").hasClass("active")?"yes":"no"};_.forEach(function(e){o["attr_"+e]=t(".b2bking_attribute_value_"+e).val()}),t(e).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_loader_indigo_content b2bking_loader_cream_content"><img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'"></div>'),t.post(b2bking_display_settings.ajaxurl,o,function(n){let i=n,_="";if(1234!==parseInt(i)){let n=JSON.parse(i);Object.keys(n).forEach(function(t){t.includes("B2BKINGPRICE")?u[t]=n[t]:t.includes("B2BTIERPRICE")?p[t]=n[t]:t.includes("B2BKINGSTOCK")?g[t]=n[t]:t.includes("B2BKINGIMAGE")?m[t]=n[t]:t.includes("B2BKINGURL")?k[t]=n[t]:t.includes("B2BKINGMIN")?f[t]=n[t]:t.includes("B2BKINGMAX")?y[t]=n[t]:t.includes("B2BKINGSTEP")?v[t]=n[t]:t.includes("B2BKINGVAL")?h[t]=n[t]:t.includes("HTML")&&(_=n[t])}),t(e).find(".b2bking_bulkorder_form_container_content_indigo").html(_),t(document.body).trigger("b2bking_set_cream_table_finish"),jQuery("html, body").animate({scrollTop:jQuery(".b2bking_bulkorder_form_container").offset().top-150},100)}})}if(t("body").on("click",".b2bking_bulkorder_pagination_button",function(){var e=t(this).parent().parent().parent().parent().parent().parent().parent(),n=t(this);t(".b2bking_auto_add_to_cart").hasClass("active")&&t("#b2bking_auto_add_to_cart_checkbox").length&&t("#b2bking_auto_add_to_cart_checkbox").is(":checked")?(t("#b2bking_cream_add_selected").click(),t(document.body).one("b2bking_multiadded_item_cart",function(){j(e,n)})):j(e,n)}),t("body").on("click",".b2bking_cream_view_options_button",function(){let e=t(this).val();t(this).hasClass("b2bking_cream_view_options_button_view")?(t(".b2bking_bulkorder_form_container_content_line_cream_"+e).removeClass("b2bking_bulkorder_form_container_content_line_cream_hidden").addClass("b2bking_cream_line_variation_colored"),t(this).removeClass("b2bking_cream_view_options_button_view"),t(this).addClass("b2bking_cream_view_options_button_hide"),t(this).find(".b2bking_cream_view_options_text").removeClass("b2bking_text_active").addClass("b2bking_text_inactive"),t(this).find(".b2bking_cream_hide_options_text").removeClass("b2bking_text_inactive").addClass("b2bking_text_active"),t(this).parent().parent().parent().addClass("b2bking_cream_view_options_button_hide"),t(this).parent().parent().parent().removeClass("b2bking_cream_view_options_button_view")):t(this).hasClass("b2bking_cream_view_options_button_hide")&&(t(".b2bking_bulkorder_form_container_content_line_cream_"+e).addClass("b2bking_bulkorder_form_container_content_line_cream_hidden"),t(this).addClass("b2bking_cream_view_options_button_view"),t(this).removeClass("b2bking_cream_view_options_button_hide"),t(this).find(".b2bking_cream_view_options_text").addClass("b2bking_text_active").removeClass("b2bking_text_inactive"),t(this).find(".b2bking_cream_hide_options_text").addClass("b2bking_text_inactive").removeClass("b2bking_text_active"),t(this).parent().parent().parent().addClass("b2bking_cream_view_options_button_view"),t(this).parent().parent().parent().removeClass("b2bking_cream_view_options_button_hide"))}),t("body").on("click",".b2bking_bulkorder_back_top",function(){t("html, body").animate({scrollTop:0},"slow")}),1===parseInt(b2bking_display_settings.bulkorder_first_search)&&jQuery(".b2bking_bulkorder_search_text_indigo").trigger("input"),t("body").on("click",".b2bking_subaccounts_account_button_login",function(){var e=t(this).val(),n={action:"b2bkingloginsubaccount",security:b2bking_display_settings.security,customer:e};t.post(b2bking_display_settings.ajaxurl,n,function(t){window.location=b2bking_display_settings.shopurl})}),t("#b2bking_return_agent").on("click",function(){var e=t(this).val(),n=t("#b2bking_return_agent_registered").val(),i={action:"b2bkingswitchtoagent",security:b2bking_display_settings.security,agent:e,agentdate:n};t.post(b2bking_display_settings.ajaxurl,i,function(t){window.location=b2bking_display_settings.subaccountsurl})}),t("body").on("click",".b2bking_bulkorder_form_container_content_line_product",function(){let e=t(this).attr("data-url");void 0!==e&&e.length>0&&window.open(e,"_blank")}),t(".b2bking_download_list_button").on("click",function(e){e.stopPropagation(),e.preventDefault();var n=t(this).attr("class").split(/\s+/);t.each(n,function(t,e){if(e.includes("id_")){let t=e.split("_")[1];window.location=b2bking_display_settings.ajaxurl+"?action=b2bkingdownloadpurchaselist&list="+t+"&security="+b2bking_display_settings.security}})}),"function"==typeof t("#b2bking_purchase_lists_table").DataTable&&t("#b2bking_purchase_lists_table").dataTable({language:{url:b2bking_display_settings.datatables_folder+b2bking_display_settings.purchase_lists_language_option+".json"}}),t(".b2bking_bulkorder_form_container_bottom_delete_button").on("click",function(){if(confirm(b2bking_display_settings.are_you_sure_delete_list)){let n=t(this).val();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_delete_button_icon"),t(".b2bking_bulkorder_form_container_bottom_delete_button_icon").remove();var e={action:"b2bking_purchase_list_delete",security:b2bking_display_settings.security,listid:n};t.post(b2bking_display_settings.ajaxurl,e,function(t){window.location=b2bking_display_settings.purchaselistsurl})}}),t(".b2bking_bulkorder_form_container_bottom_update_button").on("click",function(){let e=t(this).val(),n="";if(document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach(function(e){var i=t(e).attr("class").split(/\s+/);t.each(i,function(i,_){if(_.includes("b2bking_selected_product_id_")){let i=_.split("_")[4],r=t(e).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();(r>0||1===parseInt(b2bking_display_settings.lists_zero_qty))&&(n+=i+":"+r+"|")}})}),""!==n){t(".b2bking_bulkorder_form_container_bottom_update_button").html();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_update_button_icon"),t(".b2bking_bulkorder_form_container_bottom_update_button_icon").remove();var i={action:"b2bking_purchase_list_update",security:b2bking_display_settings.security,productstring:n,listid:e};t.post(b2bking_display_settings.ajaxurl,i,function(t){window.location.reload()})}}),void 0!==t("#b2bking_purchase_list_page").val()){t(".b2bking_bulkorder_form_container_content_line_product").css("color",b2bking_display_settings.colorsetting),t(".b2bking_bulkorder_form_container_content_line_product").css("font-weight","bold");var B=[],C=document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product");if(C.forEach(function(e){let n=t(e).val().split(" (")[0];B.push(n)}),B.length>0){var Q={action:"b2bking_ajax_batch_search",security:b2bking_display_settings.security,searchValues:B,searchType:"purchaseListLoading",dataType:"json",is_product:b2bking_display_settings.bulkorder_is_product,nonadaptive:jQuery(".b2bking_bulkorder_form_container").hasClass("nonadaptive")?1:0};t.post(b2bking_display_settings.ajaxurl,Q,function(e){C.forEach(function(n,i){let _=t(n).val().split(" (")[0],r=e[_];if(r&&'"empty"'!==r){let t=JSON.parse(r);Object.keys(t).forEach(function(e){e.includes("B2BKINGPRICE")?u[e]=t[e]:e.includes("B2BTIERPRICE")?p[e]=t[e]:e.includes("B2BKINGSTOCK")?g[e]=t[e]:e.includes("B2BKINGMIN")?f[e]=t[e]:e.includes("B2BKINGMAX")?y[e]=t[e]:e.includes("B2BKINGSTEP")?v[e]=t[e]:e.includes("B2BKINGVAL")&&(h[e]=t[e])})}var o=0,a=t(n).attr("class").split(/\s+/);t.each(a,function(t,e){e.includes("b2bking_selected_product_id_")&&(o=e.split("_")[4])}),null!==g[o+"B2BKINGSTOCK"]&&t(n).parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",g[o+"B2BKINGSTOCK"])}),C.length>0&&(d=t(C[C.length-1]).parent()),1!==parseInt(b2bking_display_settings.quotes_enabled)&&I()})}}function N(e="no"){if(t(".b2bking_has_color").removeClass("b2bking_has_color"),void 0!==t(".b2bking_shop_table").attr("class")){var n=t(".b2bking_shop_table").attr("class").split(/\s+/),i=0;if(t.each(n,function(t,e){e.includes("b2bking_productid_")&&(i=parseInt(e.split("_")[2]))}),void 0!==t("input[name=quantity]").val())var _=parseInt(t("input[name=quantity]").val());else if(void 0!==t("select[name=quantity]").val())_=parseInt(t("select[name=quantity]").val());if("no"!==e)if(void 0!==_)_=parseInt(e);else _=parseInt(e);var r=0;1===parseInt(b2bking_display_settings.add_cart_quantity_tiered_table)&&(void 0!==b2bking_display_settings.cart_quantities[i]&&(r=parseInt(b2bking_display_settings.cart_quantities[i])),0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(r=parseInt(b2bking_display_settings.cart_quantities_cartqty)));var o=_+r,a=!1,s=t(".summary .b2bking_tiered_range_replaced:first").text().replace("  "," - ").split(" - ")[1];if(void 0!==s&&""!==s)t(".b2bking_tiered_active_price").text(s),a=!0;else{var b=t(".b2bking_tiered_range_replaced:first").text().replace("  "," - ").split(" - ")[1];void 0!==b&&""!==b&&(t(".b2bking_tiered_active_price").text(b),a=!0)}var c=t(".woocommerce-variation-price .price ins").text().replace("  "," - ");if(void 0!==c&&""!==c)c.includes("-")&&(c=c.split(" - ")[1]),t(".b2bking_tiered_active_price").text(c),a=!0;else{var l=t(".woocommerce-variation-price .price").text().replace("  "," - ");l.includes("-")&&(l=l.split(" - ")[1]),void 0!==l&&""!==l&&(t(".b2bking_tiered_active_price").text(l),a=!0)}if(0!==parseInt(b2bking_display_settings.productid)){var d=jQuery(".b2bking_tiered_price_range_replaced_"+b2bking_display_settings.productid+":first").text().replace("  "," - ").split(" - ")[1];void 0!==d&&""!==d&&(t(".b2bking_tiered_active_price").text(d),a=!0)}if(!a){var u=t(".b2bking_tiered_range_original_price_display").val();""!==u&&t(".b2bking_tiered_active_price").text(u)}let g=t(".b2bking_tiered_range_original_price").val()*_;if(t.isNumeric(g)||(g=0),t(".b2bking_tiered_total_price").html(g.toFixed(b2bking_display_settings.woo_price_decimals)+' <span class="b2bking_total_price_currency_symbol">'+b2bking_display_settings.currency_symbol),t(".b2bking_shop_table.b2bking_productid_"+i+" tr td:nth-child(1)").each(function(){let e=t(this).data("range").toString(),n=e.replace("  "," - ").split(" - ");if(2===n.length){let e=parseInt(n[0]),i=parseInt(n[1]);if(o>=e&&o<=i)if(t(this).parent().find("td").addClass("b2bking_has_color"),1===parseInt(b2bking_display_settings.is_enabled_discount_table)){let e=t(this).parent().find("td:nth-child(3) ins").text();""===t.trim(e)&&(e=t(this).parent().find("td:nth-child(3)").text()),t(".b2bking_tiered_active_price").text(e);let n=t(this).parent().find("td:nth-child(3) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").html(n.toFixed(b2bking_display_settings.woo_price_decimals)+' <span class="b2bking_total_price_currency_symbol">'+b2bking_display_settings.currency_symbol)}else{let e=t(this).parent().find("td:nth-child(2) ins").text();""===t.trim(e)&&(e=t(this).parent().find("td:nth-child(2)").text()),t(".b2bking_tiered_active_price").text(e);let n=t(this).parent().find("td:nth-child(2) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").html(n.toFixed(b2bking_display_settings.woo_price_decimals)+' <span class="b2bking_total_price_currency_symbol">'+b2bking_display_settings.currency_symbol)}}else if(e.includes("+")){let n=parseInt(e.split("+")[0]);if(o>=n)if(t(this).parent().find("td").addClass("b2bking_has_color"),1===parseInt(b2bking_display_settings.is_enabled_discount_table)){let e=t(this).parent().find("td:nth-child(3) ins").text();""===t.trim(e)&&(e=t(this).parent().find("td:nth-child(3)").text()),t(".b2bking_tiered_active_price").text(e);let n=t(this).parent().find("td:nth-child(3) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").html(n.toFixed(b2bking_display_settings.woo_price_decimals)+' <span class="b2bking_total_price_currency_symbol">'+b2bking_display_settings.currency_symbol)}else{let e=t(this).parent().find("td:nth-child(2) ins").text();""===t.trim(e)&&(e=t(this).parent().find("td:nth-child(2)").text()),t(".b2bking_tiered_active_price").text(e);let n=t(this).parent().find("td:nth-child(2) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").html(n.toFixed(b2bking_display_settings.woo_price_decimals)+' <span class="b2bking_total_price_currency_symbol">'+b2bking_display_settings.currency_symbol)}}else if(o===parseInt(e))if(t(this).parent().find("td").addClass("b2bking_has_color"),1===parseInt(b2bking_display_settings.is_enabled_discount_table)){let e=t(this).parent().find("td:nth-child(3) ins").text();""===t.trim(e)&&(e=t(this).parent().find("td:nth-child(3)").text()),t(".b2bking_tiered_active_price").text(e);let n=t(this).parent().find("td:nth-child(3) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").html(n.toFixed(b2bking_display_settings.woo_price_decimals)+' <span class="b2bking_total_price_currency_symbol">'+b2bking_display_settings.currency_symbol)}else{let e=t(this).parent().find("td:nth-child(2) ins").text();""===t.trim(e)&&(e=t(this).parent().find("td:nth-child(2)").text()),t(".b2bking_tiered_active_price").text(e);let n=t(this).parent().find("td:nth-child(2) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").html(n.toFixed(b2bking_display_settings.woo_price_decimals)+' <span class="b2bking_total_price_currency_symbol">'+b2bking_display_settings.currency_symbol)}}),1===parseInt(b2bking_display_settings.tiered_active_price_overwrite_range)){let e=t(".b2bking_tiered_active_price").text();""!==t.trim(e)?(t(".b2bking_tiered_active_price").css("display","none"),t(".b2bking_tiered_range_replaced").css("display","none"),t(".b2bking_tiered_range_after").text(e).css("display","block")):(t(".b2bking_tiered_range_replaced").css("display","block"),t(".b2bking_tiered_range_after").text(e).css("display","none"))}t(document.body).trigger("b2bking_set_hover_finish")}}function T(){t("#createaccount").prop("checked")||void 0===t("#createaccount").prop("checked")?(t("#b2bking_checkout_registration_main_container_fields, .b2bking_registration_roles_dropdown_section").css("display","block"),t(".b2bking_custom_field_req_required").prop("required","true")):(t("#b2bking_checkout_registration_main_container_fields, .b2bking_registration_roles_dropdown_section").css("display","none"),t(".b2bking_custom_field_req_required").removeAttr("required"))}function S(){const e=b2bking_display_settings.orderid;t("#place_order").prop("disabled",!0);var n=t('input[name="payment_method"]:checked').val(),i=t(`label[for="payment_method_${n}"]`).text().replace(/[\t\n]+/g,"").trim();""!==b2bking_display_settings.paymentmethod&&(n=b2bking_display_settings.paymentmethod,i=t(`label[for="payment_method_${n}"]`).text().replace(/[\t\n]+/g,"").trim());const _={action:"b2bking_update_fees",security:b2bking_display_settings.security,payment_method:n,payment_method_title:i,order_id:e};b2bking_display_settings.paymentmethod="",t.post(b2bking_display_settings.ajaxurl,_,function(e){t("#place_order").prop("disabled",!1),e&&e.fragments&&(t("#order_review").html(e.fragments),t(`input[name="payment_method"][value=${n}]`).prop("checked",!0),t(`.payment_method_${n}`).css("display","block"),t(`div.payment_box:not(".payment_method_${n}")`).filter(":visible").slideUp(0),t(document.body).trigger("updated_checkout"))})}function E(){var e={};t(".variations select").each(function(){var n=t(this).attr("id"),i=t(this).val();i&&(i=i.replace('"',"in"),e[n]=i)}),t(".b2bking_bulkorder_form_container_content_line").each(function(){var n=t(this),i=!0;t.each(e,function(t,e){var _=t+"_"+e,r=t+"_any";if(!n.hasClass(_)&&!n.hasClass(r))return i=!1,!1}),i?n.hasClass("b2bking_bulkorder_form_container_content_line_cream_view_options")||n.attr("style","display: flex !important"):(n.attr("style","display: none !important"),n.find(".b2bking_cream_select_checkbox").prop("checked",!1).trigger("input"))})}t("body").on("click",".b2bking_add_cart_to_purchase_list_button",function(){let e=window.prompt(b2bking_display_settings.save_list_name,"");if(""!==e&&null!==e){var n={action:"b2bking_save_cart_to_purchase_list",security:b2bking_display_settings.security,title:e,dataType:"json"};t.post(b2bking_display_settings.ajaxurl,n,function(e){t(".b2bking_add_cart_to_purchase_list_button").text(b2bking_display_settings.list_saved),t(".b2bking_add_cart_to_purchase_list_button").prop("disabled",!0),t(document.body).trigger("b2bking_saved_purchase_list")})}}),setTimeout(function(){1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&N()},200),t("body").on("input","input[name=quantity]",function(){let e=t(this).val();1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&N(e)}),t("body").on("change","input[name=quantity]",function(){let e=t(this).val();1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&N(e)}),t("body").on("change","select[name=quantity]",function(){let e=t(this).val();1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&N(e)}),t("body").on("change",".variations select",function(){1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&N()}),1===parseInt(b2bking_display_settings.table_is_clickable)&&jQuery("body").on("click",".b2bking_tiered_price_table tbody tr",function(){var e=jQuery(this).find("td:nth-child(1)").data("range").toString();let n=e.replace("  "," - ").split(" - ");if(2===n.length){var i=parseInt(n[1]);1===parseInt(b2bking_display_settings.tiered_table_use_lowest_quantity)&&(i=parseInt(n[0]))}else i=parseInt(e.split("+")[0]);var _=t("input[name=quantity]").attr("min"),r=t("input[name=quantity]").attr("max"),o=t("input[name=quantity]").attr("step");if(void 0!==r&&""!==r||(r=999999999),void 0!==_&&""!==_||(_=1),i=(i=i>parseFloat(r)?r:i)<parseFloat(_)?_:i,void 0!==o&&""!==o){let t=i%o,e=0,_=0;0!==parseInt(t)&&((i-t)%o===0?(e=t,_=o-e):(_=t,e=o-_),2===n.length?i-=e:i+=_)}t("input[name=quantity]").val(i),t("input[name=quantity]").trigger("input").trigger("change")}),1===parseInt(b2bking_display_settings.ischeckout)&&1!==parseInt(b2bking_display_settings.validate_vat_checkout)&&(T(),t("#createaccount").change(T)),document.querySelectorAll(".b2bking_both_prices_price.b2bking_b2b_price_price").forEach(function(e){var n=jQuery(e).val();if(void 0!==n&&0===parseInt(n.length)){var i=t(e).attr("class").split(/\s+/);t.each(i,function(t,e){if(e.includes("b2bking_b2b_price_id_")){let t=e.split("_")[4];var n=jQuery(".b2bking_tiered_price_range_replaced_"+t).html();jQuery(".b2bking_tiered_price_range_replaced_"+t).remove(),jQuery(".b2bking_both_prices_price.b2bking_b2b_price_price.b2bking_b2b_price_id_"+t).html(n)}})}}),t("body").on("show_variation",".variations_form, .single_variation_wrap, .woocommerce-variation",function(e,n){var i=t(this).closest(".variations_form").find("[name=quantity]");void 0!==n.step?i.attr("step",n.step).trigger("change"):i.attr("step",1).trigger("change");var _=parseFloat(i.val());if(_=isNaN(_)||(_=_>parseFloat(n.max_qty)?n.max_qty:_)<parseFloat(n.min_qty)?n.min_qty:_,void 0!==n.max_qty&&""!==n.max_qty||(n.max_qty=999999999),void 0!==n.step){let t=_%n.step,e=0,i=0;0!==parseInt(t)&&((_-t)%n.step===0?(e=t,i=n.step-e):(i=t,e=n.step-i),_=_+i<parseFloat(n.max_qty)?_+i:_-e)}i.val(_),i.attr("min",n.min_qty).trigger("change"),i.attr("max",n.max_qty).trigger("change")}),jQuery(document.body).on("added_to_cart",function(){setTimeout(function(){jQuery(document.body).trigger("wc_fragment_refresh")},25),setTimeout(function(){jQuery(document.body).trigger("wc_fragment_refresh")},50),setTimeout(function(){jQuery(document.body).trigger("wc_fragment_refresh")},100),setTimeout(function(){jQuery(document.body).trigger("wc_fragment_refresh")},200)}),jQuery(".woocommerce-account .elementor-hidden .woocommerce").remove(),"yes"===b2bking_display_settings.have_payment_method_rules&&(t("form#order_review").on("click",'input[name="payment_method"]',function(){S()}),setTimeout(function(){S()},250),jQuery("body").on("change",'input[name="radio-control-wc-payment-method-options"]',function(){jQuery.ajax({url:b2bking_display_settings.ajaxurl,data:{action:"b2bking_update_payment_method",payment_method:jQuery(this).val()},type:"POST",complete:function(){wp.data.dispatch("wc/store/cart").invalidateResolutionForStore(),wp.data.dispatch("wc/store/checkout").invalidateResolutionForStore()}})})),1===parseInt(b2bking_display_settings.form_enforce_qty)&&t(".b2bking_bulkorder_form_container_content_line_qty_classic").on("input",function(){var e=t(this),n=parseFloat(e.attr("min"))||0,i=parseFloat(e.attr("max"))||1/0,_=parseFloat(e.attr("step"))||1,r=parseFloat(e.val());isNaN(r)?e.val(n):(r=Math.round((r-n)/_)*_+n,r=Math.max(n,Math.min(r,i)),e.val(r))}),t(document).on("mousemove",".b2bking_bulkorder_indigo_product_container .b2bking_bulkorder_indigo_image",function(e){var n=t(this).closest(".b2bking_bulkorder_indigo_product_container"),i=n.find(".b2bking_image_preview");i.show();var _=t(this).attr("src").replace("-150x150","");i.css("background-image","url("+_+")");var r=n.offset(),o=e.pageX-r.left,a=e.pageY-r.top;i.css({left:o+20,top:a+20})}),t(document).on("mouseleave",".b2bking_bulkorder_indigo_product_container .b2bking_bulkorder_indigo_image",function(){t(this).closest(".b2bking_bulkorder_indigo_product_container").find(".b2bking_image_preview").hide()}),"yes"===b2bking_display_settings.bulkorder_is_product&&(t(".variations").on("change","select",E),E())})}(jQuery);